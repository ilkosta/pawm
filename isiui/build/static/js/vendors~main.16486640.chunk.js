(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,r){"use strict";!function(t){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=Object.create((e&&e.prototype instanceof p?e:p).prototype),i=new O(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function d(){}function y(){}var v={};u(v,a,function(){return this});var b=Object.getPrototypeOf,m=b&&b(b(j([])));m&&m!==e&&r.call(m,a)&&(v=m);var g=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){var o;this._invoke=function(i,a){function s(){return new e(function(o,s){!function o(i,a,s,c){var u=l(t[i],t,a);if("throw"!==u.type){var f=u.arg,h=f.value;return h&&"object"==n(h)&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){o("next",t,s,c)},function(t){o("throw",t,s,c)}):e.resolve(h).then(function(t){f.value=t,s(f)},function(t){return o("throw",t,s,c)})}c(u.arg)}(i,a,o,s)})}return o=o?o.then(s,s):s()}}function _(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=y,u(g,"constructor",y),u(y,"constructor",d),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,s,function(){return this}),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},w(g),u(g,c,"Generator"),u(g,a,function(){return this}),u(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}r.d(e,"c",function(){return a}),r.d(e,"k",function(){return s}),r.d(e,"f",function(){return c}),r.d(e,"e",function(){return u}),r.d(e,"i",function(){return f}),r.d(e,"g",function(){return l}),r.d(e,"j",function(){return h}),r.d(e,"d",function(){return p}),r.d(e,"h",function(){return d}),r.d(e,"a",function(){return v}),r.d(e,"b",function(){return b});var i=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})};function a(t){return Math.round(Date.now()/1e3)+t}function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}var c=function(){return"undefined"!==typeof document};function u(t,e){var r;e||(e=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),t=t.replace(/[\[\]]/g,"\\$&");var n=RegExp("[?&#]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var f=function(t){var e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i(void 0,void 0,void 0,o().mark(function t(){var n;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.t.bind(null,1,7));case 2:return t.next=4,(n=t.sent).fetch.apply(n,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)}))}:fetch),function(){return e.apply(void 0,arguments)}},l=function(t){return"object"===n(t)&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"===typeof t.json},h=function(t,e,r){return i(void 0,void 0,void 0,o().mark(function n(){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setItem(e,JSON.stringify(r));case 2:case"end":return n.stop()}},n)}))},p=function(t,e){return i(void 0,void 0,void 0,o().mark(function r(){var n;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getItem(e);case 2:if(n=r.sent){r.next=5;break}return r.abrupt("return",null);case 5:return r.prev=5,r.abrupt("return",JSON.parse(n));case 9:return r.prev=9,r.t0=r.catch(5),r.abrupt("return",n);case 12:case"end":return r.stop()}},r,null,[[5,9]])}))},d=function(t,e){return i(void 0,void 0,void 0,o().mark(function r(){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.removeItem(e);case 2:case"end":return r.stop()}},r)}))},y=function(e){try{return decodeURIComponent(atob(e.replace(/[-]/g,"+").replace(/[_]/g,"/")).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(r){if(r instanceof ReferenceError)return t.from(e,"base64").toString("utf-8");throw r}},v=function(t){return Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=this;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.promise=new t.promiseConstructor(function(t,r){e.resolve=t,e.reject=r})});function b(t){var e=t.split(".");if(3!==e.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(e[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(y(e[1]))}v.promiseConstructor=Promise}(r(16).Buffer)},function(t,e){var r="undefined"!==typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};function i(t){if("string"!==typeof t&&(t+=""),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!==typeof t&&(t+=""),t}function s(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function l(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=""+t:r.arrayBuffer&&r.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,r,n=u(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=f(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype.delete=function(t){delete this.map[i(t)]},c.prototype.get=function(t){return t=i(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},c.prototype.set=function(t,e){this.map[i(t)]=a(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),s(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),s(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),s(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(t,e){var r,n,o=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=t+"";if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),d.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function b(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},p.call(y.prototype),p.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];b.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new b(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e,this.stack=Error(t).stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function g(t,n){return new Promise(function(o,i){var a=new y(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL"),o(new b("response"in s?s.response:s.responseText,r))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),a.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)})}g.polyfill=!0,t.fetch||(t.fetch=g,t.Headers=c,t.Request=y,t.Response=b),e.Headers=c,e.Request=y,e.Response=b,e.fetch=g,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e},function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(11);function i(){}var a=null,s={};function c(t){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,t!==i&&d(t,this)}function u(t,e){for(;3===t._V;)t=t._W;if(c._Y&&c._Y(t),0===t._V)return 0===t._U?(t._U=1,void(t._X=e)):1===t._U?(t._U=2,void(t._X=[t._X,e])):void t._X.push(e);!function(t,e){o(function(){var r=1===t._V?e.onFulfilled:e.onRejected;if(null!==r){var n=function(t,e){try{return t(e)}catch(t){return a=t,s}}(r,t._W);n===s?l(e.promise,a):f(e.promise,n)}else 1===t._V?f(e.promise,t._W):l(e.promise,t._W)})}(t,e)}function f(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===n(e)||"function"===typeof e)){var r=function(t){try{return t.then}catch(t){return a=t,s}}(e);if(r===s)return l(t,a);if(r===t.then&&e instanceof c)return t._V=3,t._W=e,void h(t);if("function"===typeof r)return void d(r.bind(e),t)}t._V=1,t._W=e,h(t)}function l(t,e){t._V=2,t._W=e,c._Z&&c._Z(t,e),h(t)}function h(t){if(1===t._U&&(u(t,t._X),t._X=null),2===t._U){for(var e=0;e<t._X.length;e++)u(t,t._X[e]);t._X=null}}function p(t,e,r){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=r}function d(t,e){var r=!1,n=function(t){try{t(function(t){r||(r=!0,f(e,t))},function(t){r||(r=!0,l(e,t))})}catch(t){return a=t,s}}(t);r||n!==s||(r=!0,l(e,a))}t.exports=c,c._Y=null,c._Z=null,c._0=i,c.prototype.then=function(t,e){if(this.constructor!==c)return function(t,e,r){return new t.constructor(function(n,o){var a=new c(i);a.then(n,o),u(t,new p(e,r,a))})}(this,t,e);var r=new c(i);return u(this,new p(t,e,r)),r}},function(t){function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||Function("return this")()}catch(t){"object"===("undefined"===typeof window?"undefined":e(window))&&(r=window)}t.exports=r},,function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;if("object"===("undefined"===typeof globalThis?"undefined":n(globalThis)))o=globalThis;else try{o=r(20)}catch(t){}finally{if(o||"undefined"===typeof window||(o=window),!o)throw Error("Could not determine global this")}var i=o.WebSocket||o.MozWebSocket,a=r(21);function s(t,e){return e?new i(t,e):new i(t)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(s,t,{get:function(){return i[t]}})}),t.exports={w3cwebsocket:i?s:null,version:a}},function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=Object.create((e&&e.prototype instanceof p?e:p).prototype),i=new O(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function d(){}function y(){}var v={};u(v,a,function(){return this});var b=Object.getPrototypeOf,m=b&&b(b(j([])));m&&m!==e&&r.call(m,a)&&(v=m);var g=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){var o;this._invoke=function(i,a){function s(){return new e(function(o,s){!function o(i,a,s,c){var u=l(t[i],t,a);if("throw"!==u.type){var f=u.arg,h=f.value;return h&&"object"==n(h)&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){o("next",t,s,c)},function(t){o("throw",t,s,c)}):e.resolve(h).then(function(t){f.value=t,s(f)},function(t){return o("throw",t,s,c)})}c(u.arg)}(i,a,o,s)})}return o=o?o.then(s,s):s()}}function _(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=y,u(g,"constructor",y),u(y,"constructor",d),d.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,s,function(){return this}),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},w(g),u(g,c,"Generator"),u(g,a,function(){return this}),u(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}r.d(e,"a",function(){return Yr});var i=function(t){var e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i=void 0,a=void 0,s=void 0,c=o().mark(function t(){var n;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.t.bind(null,1,7));case 2:return t.next=4,(n=t.sent).fetch.apply(n,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)}),new(s||(s=Promise))(function(t,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function n(t){try{o(c.throw(t))}catch(t){e(t)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof s?o:new s(function(t){t(o)})).then(r,n)}o((c=c.apply(i,a||[])).next())});var i,a,s,c}:fetch),function(){return e.apply(void 0,arguments)}};function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,r,n){return(p="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(t,e,r,n){var o,i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(i){if((o=Object.getOwnPropertyDescriptor(i,e)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,e)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,e,o)}else!function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(n,e,r);return!0})(t,e,r,n)}function d(t){var e="function"===typeof Map?new Map:void 0;return(d=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(){return(y()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&v(o,r.prototype),o}).apply(null,arguments)}(t,arguments,b(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,t)})(t)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(){f(e,d(Error));var t=l(e);function e(r){var n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",a=arguments.length>2?arguments[2]:void 0;return u(this,e),function(t){if(!p(t,"name",i,n||t))throw Error("failed to set property")}((n=h(o=t.call(this,r)),b(e.prototype))),o.context=a,o}return c(e)}(),g=function(){f(e,m);var t=l(e);function e(r){return u(this,e),t.call(this,"Failed to send a request to the Edge Function","FunctionsFetchError",r)}return c(e)}(),w=function(){f(e,m);var t=l(e);function e(r){return u(this,e),t.call(this,"Relay Error invoking the Edge Function","FunctionsRelayError",r)}return c(e)}(),x=function(){f(e,m);var t=l(e);function e(r){return u(this,e),t.call(this,"Edge Function returned a non-2xx status code","FunctionsHttpError",r)}return c(e)}();function _(t){"@babel/helpers - typeof";return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new O(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==_(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var O=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,o=void 0===n?{}:n,a=r.customFetch;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.headers=o,this.fetch=i(a)}var e,r;return e=t,(r=[{key:"setAuth",value:function(t){this.headers.Authorization="Bearer ".concat(t)}},{key:"invoke",value:function(t){var e,r,n,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=this,n=void 0,o=void 0,i=k().mark(function r(){var n,o,i,s,c,u,f,l;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=a.headers,i={},(o=a.body)&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",s=o):"string"===typeof o?(i["Content-Type"]="text/plain",s=o):"undefined"!==typeof FormData&&o instanceof FormData?s=o:(i["Content-Type"]="application/json",s=JSON.stringify(o))),r.next=6,this.fetch("".concat(this.url,"/").concat(t),{method:"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:s}).catch(function(t){throw new g(t)});case 6:if(!(u=(c=r.sent).headers.get("x-relay-error"))||"true"!==u){r.next=10;break}throw new w(c);case 10:if(c.ok){r.next=12;break}throw new x(c);case 12:if("application/json"!==(f=(null!==(e=c.headers.get("Content-Type"))&&void 0!==e?e:"text/plain").split(";")[0].trim())){r.next=19;break}return r.next=16,c.json();case 16:l=r.sent,r.next=34;break;case 19:if("application/octet-stream"!==f){r.next=25;break}return r.next=22,c.blob();case 22:l=r.sent,r.next=34;break;case 25:if("multipart/form-data"!==f){r.next=31;break}return r.next=28,c.formData();case 28:l=r.sent,r.next=34;break;case 31:return r.next=33,c.text();case 33:l=r.sent;case 34:return r.abrupt("return",{data:l,error:null});case 37:return r.prev=37,r.t0=r.catch(0),r.abrupt("return",{data:null,error:r.t0});case 40:case"end":return r.stop()}},r,this,[[0,37]])}),new(o||(o=Promise))(function(t,e){function a(t){try{c(i.next(t))}catch(t){e(t)}}function s(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o(function(t){t(r)})).then(a,s)}c((i=i.apply(r,n||[])).next())})}}])&&E(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),j=r(1),S=r.n(j);function L(t){"@babel/helpers - typeof";return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(){T=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==L(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var A=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,this.fetch=e.fetch?e.fetch:"undefined"===typeof fetch?S.a:fetch}var e,r;return e=t,(r=[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"then",value:function(t,e){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");var n=(0,this.fetch)(""+this.url,{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(t){return e=r,n=void 0,o=void 0,i=T().mark(function e(){var r,n,o,i,a,s,c,u,f,l,h,p;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,a=null,s=null,c=t.status,u=t.statusText,!t.ok){e.next=16;break}if("HEAD"===this.method){e.next=11;break}return e.next=9,t.text();case 9:""===(f=e.sent)||(a="text/csv"===this.headers.Accept?f:this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f:JSON.parse(f));case 11:l=null===(r=this.headers.Prefer)||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),h=null===(n=t.headers.get("content-range"))||void 0===n?void 0:n.split("/"),l&&h&&h.length>1&&(s=parseInt(h[1])),e.next=23;break;case 16:return e.next=18,t.text();case 18:p=e.sent;try{i=JSON.parse(p),Array.isArray(i)&&404===t.status&&(a=[],i=null,c=200,u="OK")}catch(e){404===t.status&&""===p?(c=204,u="No Content"):i={message:p}}if(i&&this.allowEmpty&&(null===(o=null===i||void 0===i?void 0:i.details)||void 0===o?void 0:o.includes("Results contain 0 rows"))&&(i=null,c=200,u="OK"),!i||!this.shouldThrowOnError){e.next=23;break}throw i;case 23:return e.abrupt("return",{error:i,data:a,count:s,status:c,statusText:u});case 25:case"end":return e.stop()}},e,this)}),new(o||(o=Promise))(function(t,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o(function(t){t(r)})).then(a,s)}c((i=i.apply(e,n||[])).next())});var e,n,o,i});return this.shouldThrowOnError||(n=n.catch(function(t){return{error:{message:"FetchError: ".concat(t.message),details:"",hint:"",code:t.code||""},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}}])&&P(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R(t){"@babel/helpers - typeof";return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function N(t,e){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(i,A);var t,e,r,n,o=(r=i,n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(n){var o=C(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o.apply(this,arguments)}return t=i,(e=[{key:"select",value:function(t){var e=!1,r=(null!==t&&void 0!==t?t:"*").split("").map(function(t){return/\s/.test(t)&&!e?"":('"'===t&&(e=!e),t)}).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}},{key:"order",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.ascending,n=void 0===r||r,o=e.nullsFirst,i=e.foreignTable,a=i?"".concat(i,".order"):"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(s?"".concat(s,","):"").concat(t,".").concat(n?"asc":"desc").concat(void 0===o?"":o?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).foreignTable;return this.url.searchParams.set("undefined"===typeof e?"limit":"".concat(e,".limit"),"".concat(t)),this}},{key:"range",value:function(t,e){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).foreignTable,n="undefined"===typeof r?"offset":"".concat(r,".offset"),o="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(t)),this.url.searchParams.set(o,"".concat(e-t+1)),this}},{key:"abortSignal",value:function(t){return this.signal=t,this}},{key:"single",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this}},{key:"maybeSingle",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}},{key:"csv",value:function(){return this.headers.Accept="text/csv",this}},{key:"geojson",value:function(){return this.headers.Accept="application/geo+json",this}},{key:"explain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.analyze,r=t.verbose,n=t.settings,o=t.buffers,i=t.wal,a=t.format,s=void 0===a?"text":a,c=[void 0!==e&&e?"analyze":null,void 0!==r&&r?"verbose":null,void 0!==n&&n?"settings":null,void 0!==o&&o?"buffers":null,void 0!==i&&i?"wal":null].filter(Boolean).join("|"),u=this.headers.Accept;return this.headers.Accept="application/vnd.pgrst.plan+".concat(s,'; for="').concat(u,'"; options=').concat(c,";"),this}},{key:"rollback",value:function(){var t;return(null!==(t=this.headers.Prefer)&&void 0!==t?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}},{key:"returns",value:function(){return this}}])&&I(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function B(t){"@babel/helpers - typeof";return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function G(t,e){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(i,U);var t,e,r,n,o=(r=i,n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(n){var o=M(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o.apply(this,arguments)}return t=i,(e=[{key:"eq",value:function(t,e){return this.url.searchParams.append(t,"eq.".concat(e)),this}},{key:"neq",value:function(t,e){return this.url.searchParams.append(t,"neq.".concat(e)),this}},{key:"gt",value:function(t,e){return this.url.searchParams.append(t,"gt.".concat(e)),this}},{key:"gte",value:function(t,e){return this.url.searchParams.append(t,"gte.".concat(e)),this}},{key:"lt",value:function(t,e){return this.url.searchParams.append(t,"lt.".concat(e)),this}},{key:"lte",value:function(t,e){return this.url.searchParams.append(t,"lte.".concat(e)),this}},{key:"like",value:function(t,e){return this.url.searchParams.append(t,"like.".concat(e)),this}},{key:"ilike",value:function(t,e){return this.url.searchParams.append(t,"ilike.".concat(e)),this}},{key:"is",value:function(t,e){return this.url.searchParams.append(t,"is.".concat(e)),this}},{key:"in",value:function(t,e){var r=e.map(function(t){return"string"===typeof t&&/[,()]/.test(t)?'"'.concat(t,'"'):"".concat(t)}).join(",");return this.url.searchParams.append(t,"in.(".concat(r,")")),this}},{key:"contains",value:function(t,e){return this.url.searchParams.append(t,"string"===typeof e?"cs.".concat(e):Array.isArray(e)?"cs.{".concat(e.join(","),"}"):"cs.".concat(JSON.stringify(e))),this}},{key:"containedBy",value:function(t,e){return this.url.searchParams.append(t,"string"===typeof e?"cd.".concat(e):Array.isArray(e)?"cd.{".concat(e.join(","),"}"):"cd.".concat(JSON.stringify(e))),this}},{key:"rangeGt",value:function(t,e){return this.url.searchParams.append(t,"sr.".concat(e)),this}},{key:"rangeGte",value:function(t,e){return this.url.searchParams.append(t,"nxl.".concat(e)),this}},{key:"rangeLt",value:function(t,e){return this.url.searchParams.append(t,"sl.".concat(e)),this}},{key:"rangeLte",value:function(t,e){return this.url.searchParams.append(t,"nxr.".concat(e)),this}},{key:"rangeAdjacent",value:function(t,e){return this.url.searchParams.append(t,"adj.".concat(e)),this}},{key:"overlaps",value:function(t,e){return this.url.searchParams.append(t,"string"===typeof e?"ov.".concat(e):"ov.{".concat(e.join(","),"}")),this}},{key:"textSearch",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,o=r.type,i="";"plain"===o?i="pl":"phrase"===o?i="ph":"websearch"===o&&(i="w");var a=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(t,"".concat(i,"fts").concat(a,".").concat(e)),this}},{key:"match",value:function(t){var e=this;return Object.entries(t).forEach(function(t){var r,n,o=(n=2,function(t){if(Array.isArray(t))return t}(r=t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(r,n)||function(t,e){if(t){if("string"===typeof t)return F(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());e.url.searchParams.append(o[0],"eq.".concat(o[1]))}),this}},{key:"not",value:function(t,e,r){return this.url.searchParams.append(t,"not.".concat(e,".").concat(r)),this}},{key:"or",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).foreignTable;return this.url.searchParams.append(e?"".concat(e,".or"):"or","(".concat(t,")")),this}},{key:"filter",value:function(t,e,r){return this.url.searchParams.append(t,"".concat(e,".").concat(r)),this}}])&&D(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var z=function(){function t(e,r){var n=r.headers,o=void 0===n?{}:n,i=r.schema,a=r.fetch;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.headers=o,this.schema=i,this.fetch=a}var e,r;return e=t,(r=[{key:"select",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.head,n=e.count,o=void 0!==r&&r?"HEAD":"GET",i=!1,a=(null!==t&&void 0!==t?t:"*").split("").map(function(t){return/\s/.test(t)&&!i?"":('"'===t&&(i=!i),t)}).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer="count=".concat(n)),new Y({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}},{key:"insert",value:function(t){var e,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,n=[],o=t;if(r&&n.push("count=".concat(r)),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),Array.isArray(t)){var i=t.reduce(function(t,e){return t.concat(Object.keys(e))},[]);if(i.length>0){var a=(e=new Set(i),function(t){if(Array.isArray(t))return J(t)}(e)||function(){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(t){if(t){if("string"===typeof t)return J(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?J(t,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(t){return'"'.concat(t,'"')});this.url.searchParams.set("columns",a.join(","))}}return new Y({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}},{key:"upsert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.onConflict,n=e.ignoreDuplicates,o=e.count,i=["resolution=".concat(void 0!==n&&n?"ignore":"merge","-duplicates")];void 0!==r&&this.url.searchParams.set("on_conflict",r);var a=t;return o&&i.push("count=".concat(o)),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Y({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}},{key:"update",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,r=[],n=t;return e&&r.push("count=".concat(e)),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Y({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}},{key:"delete",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).count,e=[];return t&&e.push("count=".concat(t)),this.headers.Prefer&&e.unshift(this.headers.Prefer),this.headers.Prefer=e.join(","),new Y({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}])&&H(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),q={"X-Client-Info":"postgrest-js/1.1.1"};function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var W,X,$,Z,Q,tt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,o=void 0===n?{}:n,i=r.schema,a=r.fetch;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.headers=Object.assign(Object.assign({},q),o),this.schema=i,this.fetch=a}var e,r;return e=t,(r=[{key:"from",value:function(t){var e=new URL("".concat(this.url,"/").concat(t));return new z(e,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}},{key:"rpc",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.head,a=void 0!==i&&i,s=o.count,c=new URL("".concat(this.url,"/rpc/").concat(t));a?(e="HEAD",Object.entries(n).forEach(function(t){var e,r,n=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,r)||function(t,e){if(t){if("string"===typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());c.searchParams.append(n[0],"".concat(n[1]))})):(e="POST",r=n);var u=Object.assign({},this.headers);return s&&(u.Prefer="count=".concat(s)),new Y({method:e,url:c,headers:u,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}}])&&K(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),et=r(5),rt={"X-Client-Info":"realtime-js/2.3.1"},nt=1e4;function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"}(W||(W={})),function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"}(X||(X={})),function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"}($||($={})),function(t){t.websocket="websocket"}(Z||(Z={})),function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"}(Q||(Q={}));var it=function(){function t(e,r){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}var e,r;return e=t,(r=[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.tries=t.tries+1,t.callback()},this.timerCalc(this.tries+1))}}])&&ot(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var st=function(){function t(){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.HEADER_LENGTH=1}var e,r;return e=t,(r=[{key:"decode",value:function(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e("string"===typeof t?JSON.parse(t):{})}},{key:"_binaryDecode",value:function(t){var e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}},{key:"_decodeBroadcast",value:function(t,e,r){var n=e.getUint8(1),o=e.getUint8(2),i=this.HEADER_LENGTH+2;return{ref:null,topic:r.decode(t.slice(i,i+n)),event:r.decode(t.slice(i+=n,i+o)),payload:JSON.parse(r.decode(t.slice(i+=o,t.byteLength)))}}}])&&at(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ut,ft=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nt;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.channel=e,this.event=r,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}var e,r;return e=t,(r=[{key:"resend",value:function(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0))}},{key:"updatePayload",value:function(t){this.payload=Object.assign(Object.assign({},this.payload),t)}},{key:"receive",value:function(t,e){var r;return this._hasReceived(t)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}},{key:"startTimeout",value:function(){var t=this;this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},function(e){t._cancelRefEvent(),t._cancelTimeout(),t.receivedResp=e,t._matchReceive(e)}),this.timeoutTimer=setTimeout(function(){t.trigger("timeout",{})},this.timeout))}},{key:"trigger",value:function(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(t){var e=t.status,r=t.response;this.recHooks.filter(function(t){return t.status===e}).forEach(function(t){return t.callback(r)})}},{key:"_hasReceived",value:function(t){return this.receivedResp&&this.receivedResp.status===t}}])&&ct(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"}(ut||(ut={}));var pt,dt=function(){function t(e,r){var n=this;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var o=(null===r||void 0===r?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},function(e){var r=n.caller,o=r.onJoin,i=r.onLeave,a=r.onSync;n.joinRef=n.channel._joinRef(),n.state=t.syncState(n.state,e,o,i),n.pendingDiffs.forEach(function(e){n.state=t.syncDiff(n.state,e,o,i)}),n.pendingDiffs=[],a()}),this.channel._on(o.diff,{},function(e){var r=n.caller,o=r.onJoin,i=r.onLeave,a=r.onSync;n.inPendingSyncState()?n.pendingDiffs.push(e):(n.state=t.syncDiff(n.state,e,o,i),a())}),this.onJoin(function(t,e,r){n.channel._trigger("presence",{event:"join",key:t,currentPresences:e,newPresences:r})}),this.onLeave(function(t,e,r){n.channel._trigger("presence",{event:"leave",key:t,currentPresences:e,leftPresences:r})}),this.onSync(function(){n.channel._trigger("presence",{event:"sync"})})}var e,r,n;return e=t,n=[{key:"syncState",value:function(t,e,r,n){var o=this.cloneDeep(t),i=this.transformState(e),a={},s={};return this.map(o,function(t,e){i[t]||(s[t]=e)}),this.map(i,function(t,e){var r=o[t];if(r){var n=e.map(function(t){return t.presence_ref}),i=r.map(function(t){return t.presence_ref}),c=e.filter(function(t){return i.indexOf(t.presence_ref)<0}),u=r.filter(function(t){return n.indexOf(t.presence_ref)<0});c.length>0&&(a[t]=c),u.length>0&&(s[t]=u)}else a[t]=e}),this.syncDiff(o,{joins:a,leaves:s},r,n)}},{key:"syncDiff",value:function(t,e,r,n){var o=this,i={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)},a=i.leaves;return r||(r=function(){}),n||(n=function(){}),this.map(i.joins,function(e,n){var i,a,s=null!==(i=t[e])&&void 0!==i?i:[];if(t[e]=o.cloneDeep(n),s.length>0){var c,u=t[e].map(function(t){return t.presence_ref}),f=s.filter(function(t){return u.indexOf(t.presence_ref)<0});(c=t[e]).unshift.apply(c,function(t){if(Array.isArray(t))return lt(t)}(a=f)||function(){if("undefined"!==typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}()||function(t){if(t){if("string"===typeof t)return lt(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?lt(t,void 0):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}r(e,s,n)}),this.map(a,function(e,r){var o=t[e];if(o){var i=r.map(function(t){return t.presence_ref});o=o.filter(function(t){return i.indexOf(t.presence_ref)<0}),t[e]=o,n(e,o,r),0===o.length&&delete t[e]}}),t}},{key:"map",value:function(t,e){return Object.getOwnPropertyNames(t).map(function(r){return e(r,t[r])})}},{key:"transformState",value:function(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce(function(e,r){var n=t[r];return e[r]="metas"in n?n.metas.map(function(t){return t.presence_ref=t.phx_ref,delete t.phx_ref,delete t.phx_ref_prev,t}):n,e},{})}},{key:"cloneDeep",value:function(t){return JSON.parse(JSON.stringify(t))}}],(r=[{key:"onJoin",value:function(t){this.caller.onJoin=t}},{key:"onLeave",value:function(t){this.caller.onLeave=t}},{key:"onSync",value:function(t){this.caller.onSync=t}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}])&&ht(e.prototype,r),n&&ht(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();!function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"}(pt||(pt={}));var yt=function(t,e){var r,n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(e).reduce(function(r,o){return r[o]=vt(o,t,e,n),r},{})},vt=function(t,e,r,n){var o=e.find(function(e){return e.name===t}),i=null===o||void 0===o?void 0:o.type,a=r[t];return i&&!n.includes(i)?bt(i,a):mt(a)},bt=function(t,e){if("_"===t.charAt(0)){var r=t.slice(1,t.length);return _t(e,r)}switch(t){case pt.bool:return gt(e);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return wt(e);case pt.json:case pt.jsonb:return xt(e);case pt.timestamp:return kt(e);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:default:return mt(e)}},mt=function(t){return t},gt=function(t){switch(t){case"t":return!0;case"f":return!1;default:return t}},wt=function(t){if("string"===typeof t){var e=parseFloat(t);if(!Number.isNaN(e))return e}return t},xt=function(t){if("string"===typeof t)try{return JSON.parse(t)}catch(e){return console.log("JSON parse error: ".concat(e)),t}return t},_t=function(t,e){if("string"!==typeof t)return t;var r=t.length-1;if("{"===t[0]&&"}"===t[r]){var n,o=t.slice(1,r);try{n=JSON.parse("["+o+"]")}catch(t){n=o?o.split(","):[]}return n.map(function(t){return bt(e,t)})}return t},kt=function(t){return"string"===typeof t?t.replace(" ","T"):t};function Et(t){"@babel/helpers - typeof";return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(){Ot=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==Et(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var St,Lt,Tt,Pt=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})};!function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"}(St||(St={})),function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"}(Lt||(Lt={})),function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"}(Tt||(Tt={}));var At=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},o=arguments.length>2?arguments[2]:void 0;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.topic=e,this.params=n,this.socket=o,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new ft(this,$.join,this.params,this.timeout),this.rejoinTimer=new it(function(){return r._rejoinUntilConnected()},this.socket.reconnectAfterMs),this.joinPush.receive("ok",function(){r.state=X.joined,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(t){return t.send()}),r.pushBuffer=[]}),this._onClose(function(){r.rejoinTimer.reset(),r.socket.log("channel","close ".concat(r.topic," ").concat(r._joinRef())),r.state=X.closed,r.socket._remove(r)}),this._onError(function(t){r._isLeaving()||r._isClosed()||(r.socket.log("channel","error ".concat(r.topic),t),r.state=X.errored,r.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",function(){r._isJoining()&&(r.socket.log("channel","timeout ".concat(r.topic),r.joinPush.timeout),r.state=X.errored,r.rejoinTimer.scheduleTimeout())}),this._on($.reply,{},function(t,e){r._trigger(r._replyEventName(e),t)}),this.presence=new dt(this)}var e,r,n;return e=t,n=[{key:"isEqual",value:function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0}}],(r=[{key:"subscribe",value:function(t){var e,r,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";var i=this.params.config,a=i.broadcast,s=i.presence;this._onError(function(e){return t&&t("CHANNEL_ERROR",e)}),this._onClose(function(){return t&&t("CLOSED")});var c={},u={broadcast:a,presence:s,postgres_changes:null!==(r=null===(e=this.bindings.postgres_changes)||void 0===e?void 0:e.map(function(t){return t.filter}))&&void 0!==r?r:[]};return this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",function(e){var r,o=e.postgres_changes;if(n.socket.accessToken&&n.socket.setAuth(n.socket.accessToken),void 0!==o){for(var i=n.bindings.postgres_changes,a=null!==(r=null===i||void 0===i?void 0:i.length)&&void 0!==r?r:0,s=[],c=0;c<a;c++){var u=i[c],f=u.filter,l=o&&o[c];if(!l||l.event!==f.event||l.schema!==f.schema||l.table!==f.table||l.filter!==f.filter)return n.unsubscribe(),void(t&&t("CHANNEL_ERROR",Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},u),{id:l.id}))}return n.bindings.postgres_changes=s,void(t&&t("SUBSCRIBED"))}t&&t("SUBSCRIBED")}).receive("error",function(e){t&&t("CHANNEL_ERROR",Error(JSON.stringify(Object.values(e).join(", ")||"error")))}).receive("timeout",function(){t&&t("TIMED_OUT")}),this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pt(this,void 0,void 0,Ot().mark(function r(){return Ot().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r,this)}))}},{key:"untrack",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pt(this,void 0,void 0,Ot().mark(function e(){return Ot().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send({type:"presence",event:"untrack"},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},{key:"on",value:function(t,e,r){return this._on(t,e,r)}},{key:"send",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n){var o,i,a,s=e._push(t.type,t,r.timeout||e.timeout);s.rateLimited&&n("rate limited"),"broadcast"!==t.type||(null===(a=null===(i=null===(o=e.params)||void 0===o?void 0:o.config)||void 0===i?void 0:i.broadcast)||void 0===a?void 0:a.ack)||n("ok"),s.receive("ok",function(){return n("ok")}),s.receive("timeout",function(){return n("timed out")})})}},{key:"updateJoinPayload",value:function(t){this.joinPush.updatePayload(t)}},{key:"unsubscribe",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=X.leaving;var r=function(){t.socket.log("channel","leave ".concat(t.topic)),t._trigger($.close,"leave",t._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(function(n){var o=new ft(t,$.leave,{},e);o.receive("ok",function(){r(),n("ok")}).receive("timeout",function(){r(),n("timed out")}).receive("error",function(){n("error")}),o.send(),t._canPush()||o.trigger("ok",{})})}},{key:"_push",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(t,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var n=new ft(this,t,e,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}},{key:"_onMessage",value:function(t,e){return e}},{key:"_isMember",value:function(t){return this.topic===t}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(t,e,r){var n,o,i=this,a=t.toLocaleLowerCase();if(!r||[$.close,$.error,$.leave,$.join].indexOf(a)<0||r===this._joinRef()){var s=this._onMessage(a,e,r);if(e&&!s)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(function(t){var e,r,n;return"*"===(null===(e=t.filter)||void 0===e?void 0:e.event)||(null===(n=null===(r=t.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===a}).map(function(t){return t.callback(s,r)}):null===(o=this.bindings[a])||void 0===o||o.filter(function(t){var r,n,o,i,s,c;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in t){var u=t.id,f=null===(r=t.filter)||void 0===r?void 0:r.event;return u&&(null===(n=e.ids)||void 0===n?void 0:n.includes(u))&&("*"===f||(null===f||void 0===f?void 0:f.toLocaleLowerCase())===(null===(o=e.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}var l=null===(s=null===(i=null===t||void 0===t?void 0:t.filter)||void 0===i?void 0:i.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===l||l===(null===(c=null===e||void 0===e?void 0:e.event)||void 0===c?void 0:c.toLocaleLowerCase())}return t.type.toLocaleLowerCase()===a}).map(function(t){if("object"===Et(s)&&"ids"in s){var e=s.data;s=Object.assign(Object.assign({},{schema:e.schema,table:e.table,commit_timestamp:e.commit_timestamp,eventType:e.type,new:{},old:{},errors:e.errors}),i._getPayloadRecords(e))}t.callback(s,r)})}}},{key:"_isClosed",value:function(){return this.state===X.closed}},{key:"_isJoined",value:function(){return this.state===X.joined}},{key:"_isJoining",value:function(){return this.state===X.joining}},{key:"_isLeaving",value:function(){return this.state===X.leaving}},{key:"_replyEventName",value:function(t){return"chan_reply_".concat(t)}},{key:"_on",value:function(t,e,r){var n=t.toLocaleLowerCase(),o={type:n,filter:e,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}},{key:"_off",value:function(e,r){var n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(function(e){var o;return!((null===(o=e.type)||void 0===o?void 0:o.toLocaleLowerCase())===n&&t.isEqual(e.filter,r))}),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(t){this._on($.close,{},t)}},{key:"_onError",value:function(t){this._on($.error,{},function(e){return t(e)})}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(t))}},{key:"_getPayloadRecords",value:function(t){var e={new:{},old:{}};return"INSERT"!==t.type&&"UPDATE"!==t.type||(e.new=yt(t.columns,t.record)),"UPDATE"!==t.type&&"DELETE"!==t.type||(e.old=yt(t.columns,t.old_record)),e}}])&&jt(e.prototype,r),n&&jt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rt(t){"@babel/helpers - typeof";return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(){It=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==Rt(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ct=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},Ut=function(){},Bt=function(){function t(e,r){var n,o=this;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.accessToken=null,this.channels=[],this.endPoint="",this.headers=rt,this.params={},this.timeout=nt,this.transport=et.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ut,this.conn=null,this.sendBuffer=[],this.serializer=new st,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint="".concat(e,"/").concat(Z.websocket),(null===r||void 0===r?void 0:r.params)&&(this.params=r.params),(null===r||void 0===r?void 0:r.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),(null===r||void 0===r?void 0:r.timeout)&&(this.timeout=r.timeout),(null===r||void 0===r?void 0:r.logger)&&(this.logger=r.logger),(null===r||void 0===r?void 0:r.transport)&&(this.transport=r.transport),(null===r||void 0===r?void 0:r.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);var i=null===(n=null===r||void 0===r?void 0:r.params)||void 0===n?void 0:n.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=(null===r||void 0===r?void 0:r.reconnectAfterMs)?r.reconnectAfterMs:function(t){return[1e3,2e3,5e3,1e4][t-1]||1e4},this.encode=(null===r||void 0===r?void 0:r.encode)?r.encode:function(t,e){return e(JSON.stringify(t))},this.decode=(null===r||void 0===r?void 0:r.decode)?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new it(function(){return Ct(o,void 0,void 0,It().mark(function t(){return It().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.disconnect(),this.connect();case 2:case"end":return t.stop()}},t,this)}))},this.reconnectAfterMs)}var e,r;return e=t,(r=[{key:"connect",value:function(){var t=this;this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=function(){return t._onConnOpen()},this.conn.onerror=function(e){return t._onConnError(e)},this.conn.onmessage=function(e){return t._onConnMessage(e)},this.conn.onclose=function(e){return t._onConnClose(e)}))}},{key:"disconnect",value:function(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,null!==e&&void 0!==e?e:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:function(t){var e=this;return t.unsubscribe().then(function(t){return 0===e.channels.length&&e.disconnect(),t})}},{key:"removeAllChannels",value:function(){var t=this;return Promise.all(this.channels.map(function(t){return t.unsubscribe()})).then(function(e){return t.disconnect(),e})}},{key:"log",value:function(t,e,r){this.logger(t,e,r)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case W.connecting:return Q.Connecting;case W.open:return Q.Open;case W.closing:return Q.Closing;default:return Q.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===Q.Open}},{key:"channel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};this.isConnected()||this.connect();var r=new At("realtime:".concat(t),e,this);return this.channels.push(r),r}},{key:"push",value:function(t){var e=this,r=t.event,n=t.payload,o=t.ref,i=function(){e.encode(t,function(t){var r;null===(r=e.conn)||void 0===r||r.send(t)})};if(this.log("push","".concat(t.topic," ").concat(r," (").concat(o,")"),n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(i)())return"rate limited"}else i();else this.sendBuffer.push(i)}},{key:"setAuth",value:function(t){this.accessToken=t,this.channels.forEach(function(e){t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push($.access_token,{access_token:t})})}},{key:"_makeRef",value:function(){var t=this.ref+1;return this.ref=t===this.ref?0:t,""+this.ref}},{key:"_leaveOpenTopic",value:function(t){var e=this.channels.find(function(e){return e.topic===t&&(e._isJoined()||e._isJoining())});e&&(this.log("transport",'leaving duplicate topic "'.concat(t,'"')),e.unsubscribe())}},{key:"_remove",value:function(t){this.channels=this.channels.filter(function(e){return e._joinRef()!==t._joinRef()})}},{key:"_endPointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"_onConnMessage",value:function(t){var e=this;this.decode(t.data,function(t){var r=t.topic,n=t.event,o=t.payload,i=t.ref;(i&&i===e.pendingHeartbeatRef||n===(null===o||void 0===o?void 0:o.type))&&(e.pendingHeartbeatRef=null),e.log("receive","".concat(o.status||""," ").concat(r," ").concat(n," ").concat(i&&"("+i+")"||""),o),e.channels.filter(function(t){return t._isMember(r)}).forEach(function(t){return t._trigger(n,o,i)}),e.stateChangeCallbacks.message.forEach(function(e){return e(t)})})}},{key:"_onConnOpen",value:function(){var t=this;this.log("transport","connected to ".concat(this._endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return t._sendHeartbeat()},this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(function(t){return t()})}},{key:"_onConnClose",value:function(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(e){return e(t)})}},{key:"_onConnError",value:function(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(function(e){return e(t)})}},{key:"_triggerChanError",value:function(){this.channels.forEach(function(t){return t._trigger($.error)})}},{key:"_appendParams",value:function(t,e){if(0===Object.keys(e).length)return t;var r=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return"".concat(t).concat(r).concat(n)}},{key:"_flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(t){return t()}),this.sendBuffer=[])}},{key:"_sendHeartbeat",value:function(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(t=this.conn)||void 0===t||t.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}},{key:"_throttle",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.eventsPerSecondLimitMs;return function(){return!!e.inThrottle||(t(),e.inThrottle=!0,setTimeout(function(){e.inThrottle=!1},r),!1)}}}])&&Nt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ft(t){"@babel/helpers - typeof";return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gt(t,e,r){return e&&Dt(t.prototype,e),r&&Dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}function Jt(t){var e=zt();return function(){var r,n=Vt(t);if(e){var o=Vt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ft(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ht(t){var e="function"===typeof Map?new Map:void 0;return(Ht=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(){return(zt()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&qt(o,r.prototype),o}).apply(null,arguments)}(t,arguments,Vt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),qt(r,t)})(t)}function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function qt(t,e){return(qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(){Yt(e,Ht(Error));var t=Jt(e);function e(r){var n;return Mt(this,e),(n=t.call(this,r)).__isStorageError=!0,n.name="StorageError",n}return Gt(e)}();function Wt(t){return"object"===Ft(t)&&null!==t&&"__isStorageError"in t}var Xt=function(){Yt(e,Kt);var t=Jt(e);function e(r,n){var o;return Mt(this,e),(o=t.call(this,r)).name="StorageApiError",o.status=n,o}return Gt(e,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),e}(),$t=function(){Yt(e,Kt);var t=Jt(e);function e(r,n){var o;return Mt(this,e),(o=t.call(this,r)).name="StorageUnknownError",o.originalError=n,o}return Gt(e)}();function Zt(t){"@babel/helpers - typeof";return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(){Qt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==Zt(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var te=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},ee=function(t){var e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return te(void 0,void 0,void 0,Qt().mark(function t(){var n;return Qt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.t.bind(null,1,7));case 2:return t.next=4,(n=t.sent).fetch.apply(n,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)}))}:fetch),function(){return e.apply(void 0,arguments)}};function re(t){"@babel/helpers - typeof";return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(){ne=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==re(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var oe=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},ie=function(t){return t.msg||t.message||t.error_description||t.error||JSON.stringify(t)},ae=function(t,e){return oe(void 0,void 0,void 0,ne().mark(function n(){return ne().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,te(void 0,void 0,void 0,Qt().mark(function t(){return Qt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof Response){t.next=4;break}return t.next=3,Promise.resolve().then(r.t.bind(null,1,7));case 3:return t.abrupt("return",t.sent.Response);case 4:return t.abrupt("return",Response);case 5:case"end":return t.stop()}},t)}));case 2:t instanceof n.sent?t.json().then(function(r){e(new Xt(ie(r),t.status||500))}):e(new $t(ie(t),t));case 4:case"end":return n.stop()}},n)}))},se=function(t,e,r,n){var o={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json"},null===e||void 0===e?void 0:e.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};function ce(t,e,r,n,o,i){return oe(this,void 0,void 0,ne().mark(function a(){return ne().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,s){t(r,se(e,n,o,i)).then(function(t){if(!t.ok)throw t;return(null===n||void 0===n?void 0:n.noResolveJson)?t:t.json()}).then(function(t){return a(t)}).catch(function(t){return ae(t,s)})}));case 1:case"end":return a.stop()}},a)}))}function ue(t,e,r,n){return oe(this,void 0,void 0,ne().mark(function o(){return ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",ce(t,"GET",e,r,n));case 1:case"end":return o.stop()}},o)}))}function fe(t,e,r,n,o){return oe(this,void 0,void 0,ne().mark(function i(){return ne().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",ce(t,"POST",e,n,o,r));case 1:case"end":return i.stop()}},i)}))}function le(t,e,r,n,o){return oe(this,void 0,void 0,ne().mark(function i(){return ne().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",ce(t,"PUT",e,n,o,r));case 1:case"end":return i.stop()}},i)}))}function he(t,e,r,n,o){return oe(this,void 0,void 0,ne().mark(function i(){return ne().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",ce(t,"DELETE",e,n,o,r));case 1:case"end":return i.stop()}},i)}))}function pe(t){"@babel/helpers - typeof";return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(){de=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==pe(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ve=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},be={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},me={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ge=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.headers=r,this.bucketId=n,this.fetch=ee(o)}var e,r;return e=t,(r=[{key:"uploadOrUpdate",value:function(t,e,r,n){return ve(this,void 0,void 0,de().mark(function o(){var i,a,s,c,u,f;return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,a=Object.assign(Object.assign({},me),n),s=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":a.upsert+""}),"undefined"!==typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",a.cacheControl),i.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(i=r).append("cacheControl",a.cacheControl):(i=r,s["cache-control"]="max-age=".concat(a.cacheControl),s["content-type"]=a.contentType),c=this._removeEmptyFolders(e),u=this._getFinalPath(c),o.next=8,this.fetch("".concat(this.url,"/object/").concat(u),{method:t,body:i,headers:s});case 8:if(!(f=o.sent).ok){o.next=13;break}return o.abrupt("return",{data:{path:c},error:null});case 13:return o.next=15,f.json();case 15:return o.abrupt("return",{data:null,error:o.sent});case 17:o.next=24;break;case 19:if(o.prev=19,o.t0=o.catch(0),!Wt(o.t0)){o.next=23;break}return o.abrupt("return",{data:null,error:o.t0});case 23:throw o.t0;case 24:case"end":return o.stop()}},o,this,[[0,19]])}))}},{key:"upload",value:function(t,e,r){return ve(this,void 0,void 0,de().mark(function n(){return de().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("POST",t,e,r));case 1:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(t,e,r){return ve(this,void 0,void 0,de().mark(function n(){return de().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("PUT",t,e,r));case 1:case"end":return n.stop()}},n,this)}))}},{key:"move",value:function(t,e){return ve(this,void 0,void 0,de().mark(function r(){return de().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fe(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers});case 3:return r.abrupt("return",{data:r.sent,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!Wt(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}},r,this,[[0,7]])}))}},{key:"copy",value:function(t,e){return ve(this,void 0,void 0,de().mark(function r(){return de().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fe(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers});case 3:return r.abrupt("return",{data:{path:r.sent.Key},error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!Wt(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}},r,this,[[0,7]])}))}},{key:"createSignedUrl",value:function(t,e,r){return ve(this,void 0,void 0,de().mark(function n(){var o,i,a,s;return de().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=this._getFinalPath(t),n.next=4,fe(this.fetch,"".concat(this.url,"/object/sign/").concat(o),Object.assign({expiresIn:e},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});case 4:return i=n.sent,a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"",s=encodeURI("".concat(this.url).concat(i.signedURL).concat(a)),n.abrupt("return",{data:i={signedUrl:s},error:null});case 11:if(n.prev=11,n.t0=n.catch(0),!Wt(n.t0)){n.next=15;break}return n.abrupt("return",{data:null,error:n.t0});case 15:throw n.t0;case 16:case"end":return n.stop()}},n,this,[[0,11]])}))}},{key:"createSignedUrls",value:function(t,e,r){return ve(this,void 0,void 0,de().mark(function n(){var o,i,a=this;return de().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fe(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:e,paths:t},{headers:this.headers});case 3:return o=n.sent,i=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"",n.abrupt("return",{data:o.map(function(t){return Object.assign(Object.assign({},t),{signedUrl:t.signedURL?encodeURI("".concat(a.url).concat(t.signedURL).concat(i)):null})}),error:null});case 8:if(n.prev=8,n.t0=n.catch(0),!Wt(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}},n,this,[[0,8]])}))}},{key:"download",value:function(t,e){return ve(this,void 0,void 0,de().mark(function r(){var n,o,i,a,s;return de().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n="undefined"!==typeof(null===e||void 0===e?void 0:e.transform)?"render/image/authenticated":"object",o=this.transformOptsToQueryString((null===e||void 0===e?void 0:e.transform)||{}),i=o?"?".concat(o):"",r.prev=4,a=this._getFinalPath(t),r.next=8,ue(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(a).concat(i),{headers:this.headers,noResolveJson:!0});case 8:return s=r.sent,r.next=11,s.blob();case 11:return r.abrupt("return",{data:r.sent,error:null});case 15:if(r.prev=15,r.t0=r.catch(4),!Wt(r.t0)){r.next=19;break}return r.abrupt("return",{data:null,error:r.t0});case 19:throw r.t0;case 20:case"end":return r.stop()}},r,this,[[4,15]])}))}},{key:"getPublicUrl",value:function(t,e){var r=this._getFinalPath(t),n=[],o=(null===e||void 0===e?void 0:e.download)?"download=".concat(!0===e.download?"":e.download):"";""!==o&&n.push(o);var i="undefined"!==typeof(null===e||void 0===e?void 0:e.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===e||void 0===e?void 0:e.transform)||{});""!==a&&n.push(a);var s=n.join("&");return""!==s&&(s="?".concat(s)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(i,"/public/").concat(r).concat(s))}}}},{key:"remove",value:function(t){return ve(this,void 0,void 0,de().mark(function e(){return de().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:t},{headers:this.headers});case 3:return e.abrupt("return",{data:e.sent,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!Wt(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"list",value:function(t,e,r){return ve(this,void 0,void 0,de().mark(function n(){var o;return de().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=Object.assign(Object.assign(Object.assign({},be),e),{prefix:t||""}),n.next=4,fe(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),o,{headers:this.headers},r);case 4:return n.abrupt("return",{data:n.sent,error:null});case 8:if(n.prev=8,n.t0=n.catch(0),!Wt(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}},n,this,[[0,8]])}))}},{key:"_getFinalPath",value:function(t){return"".concat(this.bucketId,"/").concat(t)}},{key:"_removeEmptyFolders",value:function(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}},{key:"transformOptsToQueryString",value:function(t){var e=[];return t.width&&e.push("width=".concat(t.width)),t.height&&e.push("height=".concat(t.height)),t.resize&&e.push("resize=".concat(t.resize)),e.join("&")}}])&&ye(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),we={"X-Client-Info":"storage-js/2.1.0"};function xe(t){"@babel/helpers - typeof";return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(){_e=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==xe(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ee=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},Oe=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.headers=Object.assign(Object.assign({},we),r),this.fetch=ee(n)}var e,r;return e=t,(r=[{key:"listBuckets",value:function(){return Ee(this,void 0,void 0,_e().mark(function t(){return _e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers});case 3:return t.abrupt("return",{data:t.sent,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!Wt(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"getBucket",value:function(t){return Ee(this,void 0,void 0,_e().mark(function e(){return _e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue(this.fetch,"".concat(this.url,"/bucket/").concat(t),{headers:this.headers});case 3:return e.abrupt("return",{data:e.sent,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!Wt(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"createBucket",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Ee(this,void 0,void 0,_e().mark(function r(){return _e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fe(this.fetch,"".concat(this.url,"/bucket"),{id:t,name:t,public:e.public},{headers:this.headers});case 3:return r.abrupt("return",{data:r.sent,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!Wt(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}},r,this,[[0,7]])}))}},{key:"updateBucket",value:function(t,e){return Ee(this,void 0,void 0,_e().mark(function r(){return _e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,le(this.fetch,"".concat(this.url,"/bucket/").concat(t),{id:t,name:t,public:e.public},{headers:this.headers});case 3:return r.abrupt("return",{data:r.sent,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!Wt(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}},r,this,[[0,7]])}))}},{key:"emptyBucket",value:function(t){return Ee(this,void 0,void 0,_e().mark(function e(){return _e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(this.fetch,"".concat(this.url,"/bucket/").concat(t,"/empty"),{},{headers:this.headers});case 3:return e.abrupt("return",{data:e.sent,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!Wt(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"deleteBucket",value:function(t){return Ee(this,void 0,void 0,_e().mark(function e(){return _e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he(this.fetch,"".concat(this.url,"/bucket/").concat(t),{},{headers:this.headers});case 3:return e.abrupt("return",{data:e.sent,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!Wt(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}))}}])&&ke(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function je(t){"@babel/helpers - typeof";return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Le(t,e){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pe=function(){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(i,Oe);var t,e,r,n,o=(r=i,n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=Te(r);if(n){var o=Te(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===je(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o.call(this,t,e,r)}return t=i,(e=[{key:"from",value:function(t){return new ge(this.url,this.headers,t,this.fetch)}}])&&Se(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ae(t){"@babel/helpers - typeof";return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(){Re=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==Ae(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var Ie=function(t){var e;return e=t||("undefined"===typeof fetch?S.a:fetch),function(){return e.apply(void 0,arguments)}},Ne=function(t,e,r){var n=Ie(r),o="undefined"===typeof Headers?j.Headers:Headers;return function(r,i){return a=void 0,s=void 0,c=void 0,u=Re().mark(function a(){var s,c,u;return Re().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:if(a.t1=s=a.sent,a.t0=null!==a.t1,!a.t0){a.next=6;break}a.t0=void 0!==s;case 6:if(!a.t0){a.next=10;break}a.t2=s,a.next=11;break;case 10:a.t2=t;case 11:return c=a.t2,(u=new o(null===i||void 0===i?void 0:i.headers)).has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization","Bearer ".concat(c)),a.abrupt("return",n(r,Object.assign(Object.assign({},i),{headers:u})));case 16:case"end":return a.stop()}},a)}),new(c||(c=Promise))(function(t,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function n(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof c?o:new c(function(t){t(o)})).then(r,n)}o((u=u.apply(a,s||[])).next())});var a,s,c,u}},Ce=r(0);function Ue(t){"@babel/helpers - typeof";return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fe(t,e,r){return e&&Be(t.prototype,e),r&&Be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ge(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}function Me(t){var e=Je();return function(){var r,n=ze(t);if(e){var o=ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ue(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ye(t){var e="function"===typeof Map?new Map:void 0;return(Ye=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(){return(Je()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&He(o,r.prototype),o}).apply(null,arguments)}(t,arguments,ze(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),He(r,t)})(t)}function Je(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function He(t,e){return(He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qe=function(){Ge(e,Ye(Error));var t=Me(e);function e(r,n){var o;return De(this,e),(o=t.call(this,r)).__isAuthError=!0,o.name="AuthError",o.status=n,o}return Fe(e)}();function Ve(t){return"object"===Ue(t)&&null!==t&&"__isAuthError"in t}var Ke=function(){Ge(e,qe);var t=Me(e);function e(r,n){var o;return De(this,e),(o=t.call(this,r,n)).name="AuthApiError",o.status=n,o}return Fe(e,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),e}();function We(t){return Ve(t)&&"AuthApiError"===t.name}var Xe=function(){Ge(e,qe);var t=Me(e);function e(r,n){var o;return De(this,e),(o=t.call(this,r)).name="AuthUnknownError",o.originalError=n,o}return Fe(e)}(),$e=function(){Ge(e,qe);var t=Me(e);function e(r,n,o){var i;return De(this,e),(i=t.call(this,r)).name=n,i.status=o,i}return Fe(e,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),e}(),Ze=function(){Ge(e,$e);var t=Me(e);function e(){return De(this,e),t.call(this,"Auth session missing!","AuthSessionMissingError",400)}return Fe(e)}(),Qe=function(){Ge(e,$e);var t=Me(e);function e(r){return De(this,e),t.call(this,r,"AuthInvalidCredentialsError",400)}return Fe(e)}(),tr=function(){Ge(e,$e);var t=Me(e);function e(r){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return De(this,e),(n=t.call(this,r,"AuthImplicitGrantRedirectError",500)).details=null,n.details=o,n}return Fe(e,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}]),e}(),er=function(){Ge(e,$e);var t=Me(e);function e(r,n){return De(this,e),t.call(this,r,"AuthRetryableFetchError",n)}return Fe(e)}();function rr(t){"@babel/helpers - typeof";return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(){nr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==rr(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var or=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},ir=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},ar=function(t){return t.msg||t.message||t.error_description||t.error||JSON.stringify(t)},sr=function(t,e){return or(void 0,void 0,void 0,nr().mark(function r(){var n;return nr().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=[502,503,504],Object(Ce.g)(t)?n.includes(t.status)?e(new er(ar(t),t.status)):t.json().then(function(r){e(new Ke(ar(r),t.status||500))}).catch(function(t){e(new Xe(ar(t),t))}):e(new er(ar(t),0));case 2:case"end":return r.stop()}},r)}))},cr=function(t,e,r,n){var o={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===e||void 0===e?void 0:e.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};function ur(t,e,r,n){var o;return or(this,void 0,void 0,nr().mark(function i(){var a,s,c,u;return nr().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=Object.assign({},null===n||void 0===n?void 0:n.headers),(null===n||void 0===n?void 0:n.jwt)&&(a.Authorization="Bearer ".concat(n.jwt)),s=null!==(o=null===n||void 0===n?void 0:n.query)&&void 0!==o?o:{},(null===n||void 0===n?void 0:n.redirectTo)&&(s.redirect_to=n.redirectTo),c=Object.keys(s).length?"?"+new URLSearchParams(s):"",i.next=7,fr(t,e,r+c,{headers:a,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);case 7:return u=i.sent,i.abrupt("return",(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(u):{data:Object.assign({},u),error:null});case 9:case"end":return i.stop()}},i)}))}function fr(t,e,r,n,o,i){return or(this,void 0,void 0,nr().mark(function a(){return nr().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,s){t(r,cr(e,n,o,i)).then(function(t){if(!t.ok)throw t;return(null===n||void 0===n?void 0:n.noResolveJson)?t:t.json()}).then(function(t){return a(t)}).catch(function(t){return sr(t,s)})}));case 1:case"end":return a.stop()}},a)}))}function lr(t){var e,r=null;return function(t){return t.access_token&&t.refresh_token&&t.expires_in}(t)&&((r=Object.assign({},t)).expires_at=Object(Ce.c)(t.expires_in)),{data:{session:r,user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function hr(t){var e;return{data:{user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function pr(t){return{data:t,error:null}}function dr(t){var e=t.action_link,r=t.email_otp,n=t.hashed_token,o=t.redirect_to,i=t.verification_type,a=ir(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:r,hashed_token:n,redirect_to:o,verification_type:i},user:Object.assign({},a)},error:null}}function yr(t){return t}function vr(t){"@babel/helpers - typeof";return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(){br=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==vr(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gr=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},wr=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},xr=function(){function t(e){var r=e.url,n=void 0===r?"":r,o=e.headers,i=void 0===o?{}:o,a=e.fetch;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=n,this.headers=i,this.fetch=Object(Ce.i)(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}var e,r;return e=t,(r=[{key:"signOut",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"POST","".concat(this.url,"/logout"),{headers:this.headers,jwt:t,noResolveJson:!0});case 3:return e.abrupt("return",{data:null,error:null});case 6:if(e.prev=6,e.t0=e.catch(0),!Ve(e.t0)){e.next=10;break}return e.abrupt("return",{data:null,error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"inviteUserByEmail",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gr(this,void 0,void 0,br().mark(function r(){return br().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ur(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:hr});case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!Ve(r.t0)){r.next=10;break}return r.abrupt("return",{data:{user:null},error:r.t0});case 10:throw r.t0;case 11:case"end":return r.stop()}},r,this,[[0,6]])}))}},{key:"generateLink",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){var r,n,o;return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.options,n=wr(t,["options"]),o=Object.assign(Object.assign({},n),r),"newEmail"in n&&(o.new_email=null===n||void 0===n?void 0:n.newEmail,delete o.newEmail),e.next=6,ur(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:o,headers:this.headers,xform:dr,redirectTo:null===r||void 0===r?void 0:r.redirectTo});case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),!Ve(e.t0)){e.next=13;break}return e.abrupt("return",{data:{properties:null,user:null},error:e.t0});case 13:throw e.t0;case 14:case"end":return e.stop()}},e,this,[[0,9]])}))}},{key:"createUser",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:t,headers:this.headers,xform:hr});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!Ve(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"listUsers",value:function(t){var e,r,n,o,i,a,s;return gr(this,void 0,void 0,br().mark(function c(){var u,f,l,h,p;return br().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,u={nextPage:null,lastPage:0,total:0},c.next=4,ur(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(e=null===t||void 0===t?void 0:t.page)||void 0===e?void 0:""+e)&&void 0!==r?r:"",per_page:null!==(o=null===(n=null===t||void 0===t?void 0:t.perPage)||void 0===n?void 0:""+n)&&void 0!==o?o:""},xform:yr});case 4:if(!(f=c.sent).error){c.next=7;break}throw f.error;case 7:return c.next=9,f.json();case 9:return l=c.sent,h=null!==(i=f.headers.get("x-total-count"))&&void 0!==i?i:0,(p=null!==(s=null===(a=f.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[]).length>0&&(p.forEach(function(t){var e=parseInt(t.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(t.split(";")[1].split("=")[1]);u["".concat(r,"Page")]=e}),u.total=parseInt(h)),c.abrupt("return",{data:Object.assign(Object.assign({},l),u),error:null});case 16:if(c.prev=16,c.t0=c.catch(0),!Ve(c.t0)){c.next=20;break}return c.abrupt("return",{data:{users:[]},error:c.t0});case 20:throw c.t0;case 21:case"end":return c.stop()}},c,this,[[0,16]])}))}},{key:"getUserById",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(t),{headers:this.headers,xform:hr});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!Ve(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"updateUserById",value:function(t,e){return gr(this,void 0,void 0,br().mark(function r(){return br().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ur(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(t),{body:e,headers:this.headers,xform:hr});case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!Ve(r.t0)){r.next=10;break}return r.abrupt("return",{data:{user:null},error:r.t0});case 10:throw r.t0;case 11:case"end":return r.stop()}},r,this,[[0,6]])}))}},{key:"deleteUser",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(t),{headers:this.headers,xform:hr});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!Ve(e.t0)){e.next=10;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"_listFactors",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){var r;return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(t.userId,"/factors"),{headers:this.headers,xform:function(t){return{data:{factors:t},error:null}}});case 3:return e.abrupt("return",{data:(r=e.sent).data,error:r.error});case 9:if(e.prev=9,e.t0=e.catch(0),!Ve(e.t0)){e.next=13;break}return e.abrupt("return",{data:null,error:e.t0});case 13:throw e.t0;case 14:case"end":return e.stop()}},e,this,[[0,9]])}))}},{key:"_deleteFactor",value:function(t){return gr(this,void 0,void 0,br().mark(function e(){return br().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(t.userId,"/factors/").concat(t.id),{headers:this.headers});case 3:return e.abrupt("return",{data:e.sent,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!Ve(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}},e,this,[[0,7]])}))}}])&&mr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_r={getItem:function(t){return Object(Ce.f)()?globalThis.localStorage.getItem(t):null},setItem:function(t,e){Object(Ce.f)()&&globalThis.localStorage.setItem(t,e)},removeItem:function(t){Object(Ce.f)()&&globalThis.localStorage.removeItem(t)}};function kr(t){"@babel/helpers - typeof";return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t){"@babel/helpers - typeof";return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(){Or=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==Er(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Sr=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})};!function(){if("object"!==("undefined"===typeof globalThis?"undefined":kr(globalThis)))try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(t){"undefined"!==typeof self&&(self.globalThis=self)}}();var Lr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.7.0"}},Tr=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;var r=Object.assign(Object.assign({},Lr),e);this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||_r,this.admin=new xr({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Object(Ce.i)(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.initialize(),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)}}var e,r;return e=t,(r=[{key:"initialize",value:function(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}},{key:"_initialize",value:function(){return Sr(this,void 0,void 0,Or().mark(function t(){var e,r,n,o,i;return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initializePromise){t.next=2;break}return t.abrupt("return",this.initializePromise);case 2:if(t.prev=2,!this.detectSessionInUrl||!this._isImplicitGrantFlow()){t.next=19;break}return t.next=6,this._getSessionFromUrl();case 6:if(r=(e=t.sent).data,!(n=e.error)){t.next=13;break}return t.next=12,this._removeSession();case 12:return t.abrupt("return",{error:n});case 13:return o=r.session,i=r.redirectType,t.next=16,this._saveSession(o);case 16:return this._notifyAllSubscribers("SIGNED_IN",o),"recovery"===i&&this._notifyAllSubscribers("PASSWORD_RECOVERY",o),t.abrupt("return",{error:null});case 19:return t.next=21,this._recoverAndRefresh();case 21:return t.abrupt("return",{error:null});case 24:if(t.prev=24,t.t0=t.catch(2),!Ve(t.t0)){t.next=28;break}return t.abrupt("return",{error:t.t0});case 28:return t.abrupt("return",{error:new Xe("Unexpected error during initialization",t.t0)});case 29:return t.prev=29,this._handleVisibilityChange(),t.finish(29);case 32:case"end":return t.stop()}},t,this,[[2,24,29,32]])}))}},{key:"signUp",value:function(t){var e,r;return Sr(this,void 0,void 0,Or().mark(function n(){var o,i,a,s,c,u,f,l,h,p,d,y;return Or().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:if(!("email"in t)){n.next=10;break}return i=t.email,a=t.password,s=t.options,n.next=7,ur(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:i,password:a,data:null!==(e=null===s||void 0===s?void 0:s.data)&&void 0!==e?e:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:lr});case 7:o=n.sent,n.next=18;break;case 10:if(!("phone"in t)){n.next=17;break}return c=t.phone,u=t.password,f=t.options,n.next=14,ur(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:c,password:u,data:null!==(r=null===f||void 0===f?void 0:f.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===f||void 0===f?void 0:f.captchaToken}},xform:lr});case 14:o=n.sent,n.next=18;break;case 17:throw new Qe("You must provide either an email or phone number and a password");case 18:if(h=(l=o).data,!(p=l.error)&&h){n.next=21;break}return n.abrupt("return",{data:{user:null,session:null},error:p});case 21:if(d=h.session,y=h.user,!h.session){n.next=27;break}return n.next=26,this._saveSession(h.session);case 26:this._notifyAllSubscribers("SIGNED_IN",d);case 27:return n.abrupt("return",{data:{user:y,session:d},error:null});case 30:if(n.prev=30,n.t0=n.catch(0),!Ve(n.t0)){n.next=34;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 34:throw n.t0;case 35:case"end":return n.stop()}},n,this,[[0,30]])}))}},{key:"signInWithPassword",value:function(t){var e,r;return Sr(this,void 0,void 0,Or().mark(function n(){var o,i,a,s,c,u,f,l,h,p;return Or().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:if(!("email"in t)){n.next=10;break}return i=t.email,a=t.password,s=t.options,n.next=7,ur(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:i,password:a,data:null!==(e=null===s||void 0===s?void 0:s.data)&&void 0!==e?e:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:lr});case 7:o=n.sent,n.next=18;break;case 10:if(!("phone"in t)){n.next=17;break}return c=t.phone,u=t.password,f=t.options,n.next=14,ur(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:c,password:u,data:null!==(r=null===f||void 0===f?void 0:f.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===f||void 0===f?void 0:f.captchaToken}},xform:lr});case 14:o=n.sent,n.next=18;break;case 17:throw new Qe("You must provide either an email or phone number and a password");case 18:if(h=(l=o).data,!(p=l.error)&&h){n.next=21;break}return n.abrupt("return",{data:{user:null,session:null},error:p});case 21:if(!h.session){n.next=25;break}return n.next=24,this._saveSession(h.session);case 24:this._notifyAllSubscribers("SIGNED_IN",h.session);case 25:return n.abrupt("return",{data:h,error:p});case 28:if(n.prev=28,n.t0=n.catch(0),!Ve(n.t0)){n.next=32;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 32:throw n.t0;case 33:case"end":return n.stop()}},n,this,[[0,28]])}))}},{key:"signInWithOAuth",value:function(t){var e,r,n;return Sr(this,void 0,void 0,Or().mark(function o(){return Or().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._removeSession();case 2:return o.abrupt("return",this._handleProviderSignIn(t.provider,{redirectTo:null===(e=t.options)||void 0===e?void 0:e.redirectTo,scopes:null===(r=t.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=t.options)||void 0===n?void 0:n.queryParams}));case 3:case"end":return o.stop()}},o,this)}))}},{key:"signInWithOtp",value:function(t){var e,r,n,o;return Sr(this,void 0,void 0,Or().mark(function i(){var a,s,c,u;return Or().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this._removeSession();case 3:if(!("email"in t)){i.next=10;break}return a=t.email,s=t.options,i.next=7,ur(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:a,data:null!==(e=null===s||void 0===s?void 0:s.data)&&void 0!==e?e:{},create_user:null===(r=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});case 7:return i.abrupt("return",{data:{user:null,session:null},error:i.sent.error});case 10:if(!("phone"in t)){i.next=17;break}return c=t.phone,u=t.options,i.next=14,ur(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:c,data:null!==(n=null===u||void 0===u?void 0:u.data)&&void 0!==n?n:{},create_user:null===(o=null===u||void 0===u?void 0:u.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===u||void 0===u?void 0:u.captchaToken}}});case 14:return i.abrupt("return",{data:{user:null,session:null},error:i.sent.error});case 17:throw new Qe("You must provide either an email or phone number.");case 20:if(i.prev=20,i.t0=i.catch(0),!Ve(i.t0)){i.next=24;break}return i.abrupt("return",{data:{user:null,session:null},error:i.t0});case 24:throw i.t0;case 25:case"end":return i.stop()}},i,this,[[0,20]])}))}},{key:"verifyOtp",value:function(t){var e,r;return Sr(this,void 0,void 0,Or().mark(function n(){var o,i,a,s,c;return Or().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:return n.next=5,ur(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:null===(e=t.options)||void 0===e?void 0:e.captchaToken}}),redirectTo:null===(r=t.options)||void 0===r?void 0:r.redirectTo,xform:lr});case 5:if(i=(o=n.sent).data,!(a=o.error)){n.next=10;break}throw a;case 10:if(i){n.next=12;break}throw"An error occurred on token verification.";case 12:if(c=i.user,!(null===(s=i.session)||void 0===s?void 0:s.access_token)){n.next=18;break}return n.next=17,this._saveSession(s);case 17:this._notifyAllSubscribers("SIGNED_IN",s);case 18:return n.abrupt("return",{data:{user:c,session:s},error:null});case 21:if(n.prev=21,n.t0=n.catch(0),!Ve(n.t0)){n.next=25;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 25:throw n.t0;case 26:case"end":return n.stop()}},n,this,[[0,21]])}))}},{key:"signInWithSSO",value:function(t){var e,r,n;return Sr(this,void 0,void 0,Or().mark(function o(){return Or().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,this._removeSession();case 3:return o.next=5,ur(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(r=null===(e=t.options)||void 0===e?void 0:e.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===t||void 0===t?void 0:t.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:pr});case 5:return o.abrupt("return",o.sent);case 8:if(o.prev=8,o.t0=o.catch(0),!Ve(o.t0)){o.next=12;break}return o.abrupt("return",{data:null,error:o.t0});case 12:throw o.t0;case 13:case"end":return o.stop()}},o,this,[[0,8]])}))}},{key:"getSession",value:function(){return Sr(this,void 0,void 0,Or().mark(function t(){var e,r,n,o,i;return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initializePromise;case 2:if(e=null,!this.persistSession){t.next=16;break}return t.next=6,Object(Ce.d)(this.storage,this.storageKey);case 6:if(null===(r=t.sent)){t.next=14;break}if(!this._isValidSession(r)){t.next=12;break}e=r,t.next=14;break;case 12:return t.next=14,this._removeSession();case 14:t.next=17;break;case 16:e=this.inMemorySession;case 17:if(e){t.next=19;break}return t.abrupt("return",{data:{session:null},error:null});case 19:if(e.expires_at&&e.expires_at<=Date.now()/1e3){t.next=22;break}return t.abrupt("return",{data:{session:e},error:null});case 22:return t.next=24,this._callRefreshToken(e.refresh_token);case 24:if(o=(n=t.sent).session,!(i=n.error)){t.next=29;break}return t.abrupt("return",{data:{session:null},error:i});case 29:return t.abrupt("return",{data:{session:o},error:null});case 30:case"end":return t.stop()}},t,this)}))}},{key:"getUser",value:function(t){var e,r;return Sr(this,void 0,void 0,Or().mark(function n(){var o,i,a;return Or().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t){n.next=10;break}return n.next=4,this.getSession();case 4:if(i=(o=n.sent).data,!(a=o.error)){n.next=9;break}throw a;case 9:t=null!==(r=null===(e=i.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:void 0;case 10:return n.next=12,ur(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:t,xform:hr});case 12:return n.abrupt("return",n.sent);case 15:if(n.prev=15,n.t0=n.catch(0),!Ve(n.t0)){n.next=19;break}return n.abrupt("return",{data:{user:null},error:n.t0});case 19:throw n.t0;case 20:case"end":return n.stop()}},n,this,[[0,15]])}))}},{key:"updateUser",value:function(t){return Sr(this,void 0,void 0,Or().mark(function e(){var r,n,o,i,a,s,c;return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getSession();case 3:if(n=(r=e.sent).data,!(o=r.error)){e.next=8;break}throw o;case 8:if(n.session){e.next=10;break}throw new Ze;case 10:return i=n.session,e.next=13,ur(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,body:t,jwt:i.access_token,xform:hr});case 13:if(s=(a=e.sent).data,!(c=a.error)){e.next=18;break}throw c;case 18:return i.user=s.user,e.next=21,this._saveSession(i);case 21:return this._notifyAllSubscribers("USER_UPDATED",i),e.abrupt("return",{data:{user:i.user},error:null});case 25:if(e.prev=25,e.t0=e.catch(0),!Ve(e.t0)){e.next=29;break}return e.abrupt("return",{data:{user:null},error:e.t0});case 29:throw e.t0;case 30:case"end":return e.stop()}},e,this,[[0,25]])}))}},{key:"_decodeJWT",value:function(t){return Object(Ce.b)(t)}},{key:"setSession",value:function(t){return Sr(this,void 0,void 0,Or().mark(function e(){var r,n,o,i,a,s,c,u,f,l,h;return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.access_token&&t.refresh_token){e.next=3;break}throw new Ze;case 3:if(r=Date.now()/1e3,n=r,o=!0,i=null,(a=Object(Ce.b)(t.access_token)).exp&&(o=(n=a.exp)<=r),!o){e.next=22;break}return e.next=12,this._callRefreshToken(t.refresh_token);case 12:if(c=(s=e.sent).session,!(u=s.error)){e.next=17;break}return e.abrupt("return",{data:{user:null,session:null},error:u});case 17:if(c){e.next=19;break}return e.abrupt("return",{data:{user:null,session:null},error:null});case 19:i=c,e.next=32;break;case 22:return e.next=24,this.getUser(t.access_token);case 24:if(l=(f=e.sent).data,!(h=f.error)){e.next=29;break}throw h;case 29:return i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},e.next=32,this._saveSession(i);case 32:return e.abrupt("return",{data:{user:i.user,session:i},error:null});case 35:if(e.prev=35,e.t0=e.catch(0),!Ve(e.t0)){e.next=39;break}return e.abrupt("return",{data:{session:null,user:null},error:e.t0});case 39:throw e.t0;case 40:case"end":return e.stop()}},e,this,[[0,35]])}))}},{key:"refreshSession",value:function(t){var e;return Sr(this,void 0,void 0,Or().mark(function r(){var n,o,i,a,s,c;return Or().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t){r.next=10;break}return r.next=4,this.getSession();case 4:if(o=(n=r.sent).data,!(i=n.error)){r.next=9;break}throw i;case 9:t=null!==(e=o.session)&&void 0!==e?e:void 0;case 10:if(null===t||void 0===t?void 0:t.refresh_token){r.next=12;break}throw new Ze;case 12:return r.next=14,this._callRefreshToken(t.refresh_token);case 14:if(s=(a=r.sent).session,!(c=a.error)){r.next=19;break}return r.abrupt("return",{data:{user:null,session:null},error:c});case 19:if(s){r.next=21;break}return r.abrupt("return",{data:{user:null,session:null},error:null});case 21:return r.abrupt("return",{data:{user:s.user,session:s},error:null});case 24:if(r.prev=24,r.t0=r.catch(0),!Ve(r.t0)){r.next=28;break}return r.abrupt("return",{data:{user:null,session:null},error:r.t0});case 28:throw r.t0;case 29:case"end":return r.stop()}},r,this,[[0,24]])}))}},{key:"_getSessionFromUrl",value:function(){return Sr(this,void 0,void 0,Or().mark(function t(){var e,r,n,o,i,a,s,c,u,f,l,h,p,d,y,v,b;return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Object(Ce.f)()){t.next=3;break}throw new tr("No browser detected.");case 3:if(this._isImplicitGrantFlow()){t.next=5;break}throw new tr("Not a valid implicit grant flow url.");case 5:if(!(e=Object(Ce.e)("error_description"))){t.next=14;break}if(r=Object(Ce.e)("error_code")){t.next=10;break}throw new tr("No error_code detected.");case 10:if(n=Object(Ce.e)("error")){t.next=13;break}throw new tr("No error detected.");case 13:throw new tr(e,{error:n,code:r});case 14:if(o=Object(Ce.e)("provider_token"),i=Object(Ce.e)("provider_refresh_token"),a=Object(Ce.e)("access_token")){t.next=19;break}throw new tr("No access_token detected.");case 19:if(s=Object(Ce.e)("expires_in")){t.next=22;break}throw new tr("No expires_in detected.");case 22:if(c=Object(Ce.e)("refresh_token")){t.next=25;break}throw new tr("No refresh_token detected.");case 25:if(u=Object(Ce.e)("token_type")){t.next=28;break}throw new tr("No token_type detected.");case 28:return f=Math.round(Date.now()/1e3),l=f+parseInt(s),t.next=32,this.getUser(a);case 32:if(p=(h=t.sent).data,!(d=h.error)){t.next=37;break}throw d;case 37:return y=p.user,v={provider_token:o,provider_refresh_token:i,access_token:a,expires_in:parseInt(s),expires_at:l,refresh_token:c,token_type:u,user:y},b=Object(Ce.e)("type"),window.location.replace(window.location.href.split("#")[0]),t.abrupt("return",{data:{session:v,redirectType:b},error:null});case 44:if(t.prev=44,t.t0=t.catch(0),!Ve(t.t0)){t.next=48;break}return t.abrupt("return",{data:{session:null,redirectType:null},error:t.t0});case 48:throw t.t0;case 49:case"end":return t.stop()}},t,this,[[0,44]])}))}},{key:"_isImplicitGrantFlow",value:function(){return Object(Ce.f)()&&(!!Object(Ce.e)("access_token")||!!Object(Ce.e)("error_description"))}},{key:"signOut",value:function(){var t;return Sr(this,void 0,void 0,Or().mark(function e(){var r,n,o,i,a;return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSession();case 2:if(n=(r=e.sent).data,!(o=r.error)){e.next=7;break}return e.abrupt("return",{error:o});case 7:if(!(i=null===(t=n.session)||void 0===t?void 0:t.access_token)){e.next=16;break}return e.next=11,this.admin.signOut(i);case 11:if(!(a=e.sent.error)){e.next=16;break}if(We(a)&&(404===a.status||401===a.status)){e.next=16;break}return e.abrupt("return",{error:a});case 16:return e.next=18,this._removeSession();case 18:return this._notifyAllSubscribers("SIGNED_OUT",null),e.abrupt("return",{error:null});case 20:case"end":return e.stop()}},e,this)}))}},{key:"onAuthStateChange",value:function(t){var e=this,r=Object(Ce.k)(),n={id:r,callback:t,unsubscribe:function(){e.stateChangeEmitters.delete(r)}};return this.stateChangeEmitters.set(r,n),{data:{subscription:n}}}},{key:"resetPasswordForEmail",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sr(this,void 0,void 0,Or().mark(function r(){return Or().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ur(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:t,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo});case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!Ve(r.t0)){r.next=10;break}return r.abrupt("return",{data:null,error:r.t0});case 10:throw r.t0;case 11:case"end":return r.stop()}},r,this,[[0,6]])}))}},{key:"_refreshAccessToken",value:function(t){return Sr(this,void 0,void 0,Or().mark(function e(){return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ur(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:t},headers:this.headers,xform:lr});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!Ve(e.t0)){e.next=10;break}return e.abrupt("return",{data:{session:null,user:null},error:e.t0});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"_isValidSession",value:function(t){return"object"===Er(t)&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}},{key:"_handleProviderSignIn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._getUrlForProvider(t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return Object(Ce.f)()&&window.location.assign(r),{data:{provider:t,url:r},error:null}}},{key:"_recoverAndRefresh",value:function(){var t;return Sr(this,void 0,void 0,Or().mark(function e(){var r,n,o,i=this;return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ce.d)(this.storage,this.storageKey);case 3:if(this._isValidSession(r=e.sent)){e.next=9;break}if(null===r){e.next=8;break}return e.next=8,this._removeSession();case 8:return e.abrupt("return");case 9:if(n=Math.round(Date.now()/1e3),(null!==(t=r.expires_at)&&void 0!==t?t:1/0)>=n+10){e.next=32;break}if(!this.autoRefreshToken||!r.refresh_token){e.next=28;break}return this.networkRetries++,e.next=15,this._callRefreshToken(r.refresh_token);case 15:if(!(o=e.sent.error)){e.next=25;break}if(console.log(o.message),!(o instanceof er&&this.networkRetries<10)){e.next=23;break}return this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(function(){return i._recoverAndRefresh()},100*Math.pow(2,this.networkRetries)),e.abrupt("return");case 23:return e.next=25,this._removeSession();case 25:this.networkRetries=0,e.next=30;break;case 28:return e.next=30,this._removeSession();case 30:e.next=36;break;case 32:if(!this.persistSession){e.next=35;break}return e.next=35,this._saveSession(r);case 35:this._notifyAllSubscribers("SIGNED_IN",r);case 36:e.next=42;break;case 38:return e.prev=38,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 42:case"end":return e.stop()}},e,this,[[0,38]])}))}},{key:"_callRefreshToken",value:function(t){var e,r;return Sr(this,void 0,void 0,Or().mark(function n(){var o,i,a,s,c;return Or().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.refreshingDeferred){n.next=2;break}return n.abrupt("return",this.refreshingDeferred.promise);case 2:if(n.prev=2,this.refreshingDeferred=new Ce.a,t){n.next=6;break}throw new Ze;case 6:return n.next=8,this._refreshAccessToken(t);case 8:if(i=(o=n.sent).data,!(a=o.error)){n.next=13;break}throw a;case 13:if(i.session){n.next=15;break}throw new Ze;case 15:return n.next=17,this._saveSession(i.session);case 17:return this._notifyAllSubscribers("TOKEN_REFRESHED",i.session),this.refreshingDeferred.resolve(s={session:i.session,error:null}),n.abrupt("return",s);case 23:if(n.prev=23,n.t0=n.catch(2),!Ve(n.t0)){n.next=29;break}return c={session:null,error:n.t0},null===(e=this.refreshingDeferred)||void 0===e||e.resolve(c),n.abrupt("return",c);case 29:throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(n.t0),n.t0;case 31:return n.prev=31,this.refreshingDeferred=null,n.finish(31);case 34:case"end":return n.stop()}},n,this,[[2,23,31,34]])}))}},{key:"_notifyAllSubscribers",value:function(t,e){this.stateChangeEmitters.forEach(function(r){return r.callback(t,e)})}},{key:"_saveSession",value:function(t){return Sr(this,void 0,void 0,Or().mark(function e(){var r,n,o;return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistSession||(this.inMemorySession=t),(r=t.expires_at)&&(n=Math.round(Date.now()/1e3),this._startAutoRefreshToken(1e3*((o=r-n)-(o>10?10:.5)))),!this.persistSession||!t.expires_at){e.next=6;break}return e.next=6,this._persistSession(t);case 6:case"end":return e.stop()}},e,this)}))}},{key:"_persistSession",value:function(t){return Object(Ce.j)(this.storage,this.storageKey,t)}},{key:"_removeSession",value:function(){return Sr(this,void 0,void 0,Or().mark(function t(){return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.persistSession){t.next=5;break}return t.next=3,Object(Ce.h)(this.storage,this.storageKey);case 3:t.next=6;break;case 5:this.inMemorySession=null;case 6:this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer);case 7:case"end":return t.stop()}},t,this)}))}},{key:"_startAutoRefreshToken",value:function(t){var e=this;this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),t>0&&this.autoRefreshToken&&(this.refreshTokenTimer=setTimeout(function(){return Sr(e,void 0,void 0,Or().mark(function t(){var e,r,n;return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.networkRetries++,t.next=3,this.getSession();case 3:if(r=(e=t.sent).data.session,e.error||!r){t.next=13;break}return t.next=9,this._callRefreshToken(r.refresh_token);case 9:(n=t.sent.error)||(this.networkRetries=0),n instanceof er&&this.networkRetries<10&&this._startAutoRefreshToken(100*Math.pow(2,this.networkRetries));case 13:case"end":return t.stop()}},t,this)}))},t),"function"===typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())}},{key:"_handleVisibilityChange",value:function(){var t=this;if(!Object(Ce.f)()||!(null===window||void 0===window?void 0:window.addEventListener))return!1;try{null===window||void 0===window||window.addEventListener("visibilitychange",function(){return Sr(t,void 0,void 0,Or().mark(function t(){return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("visible"!==document.visibilityState){t.next=5;break}return t.next=3,this.initializePromise;case 3:return t.next=5,this._recoverAndRefresh();case 5:case"end":return t.stop()}},t,this)}))})}catch(t){console.error("_handleVisibilityChange",t)}}},{key:"_getUrlForProvider",value:function(t,e){var r=["provider=".concat(encodeURIComponent(t))];if((null===e||void 0===e?void 0:e.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(e.redirectTo))),(null===e||void 0===e?void 0:e.scopes)&&r.push("scopes=".concat(encodeURIComponent(e.scopes))),null===e||void 0===e?void 0:e.queryParams){var n=new URLSearchParams(e.queryParams);r.push(""+n)}return"".concat(this.url,"/authorize?").concat(r.join("&"))}},{key:"_unenroll",value:function(t){var e;return Sr(this,void 0,void 0,Or().mark(function r(){var n,o,i;return Or().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.getSession();case 3:if(o=(n=r.sent).data,!(i=n.error)){r.next=8;break}return r.abrupt("return",{data:null,error:i});case 8:return r.next=10,ur(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(t.factorId),{headers:this.headers,jwt:null===(e=null===o||void 0===o?void 0:o.session)||void 0===e?void 0:e.access_token});case 10:return r.abrupt("return",r.sent);case 13:if(r.prev=13,r.t0=r.catch(0),!Ve(r.t0)){r.next=17;break}return r.abrupt("return",{data:null,error:r.t0});case 17:throw r.t0;case 18:case"end":return r.stop()}},r,this,[[0,13]])}))}},{key:"_enroll",value:function(t){var e,r;return Sr(this,void 0,void 0,Or().mark(function n(){var o,i,a,s,c,u;return Or().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.getSession();case 3:if(i=(o=n.sent).data,!(a=o.error)){n.next=8;break}return n.abrupt("return",{data:null,error:a});case 8:return n.next=10,ur(this.fetch,"POST","".concat(this.url,"/factors"),{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:null===(e=null===i||void 0===i?void 0:i.session)||void 0===e?void 0:e.access_token});case 10:if(c=(s=n.sent).data,!(u=s.error)){n.next=15;break}return n.abrupt("return",{data:null,error:u});case 15:return(null===(r=null===c||void 0===c?void 0:c.totp)||void 0===r?void 0:r.qr_code)&&(c.totp.qr_code="data:image/svg+xml;utf-8,".concat(c.totp.qr_code)),n.abrupt("return",{data:c,error:null});case 19:if(n.prev=19,n.t0=n.catch(0),!Ve(n.t0)){n.next=23;break}return n.abrupt("return",{data:null,error:n.t0});case 23:throw n.t0;case 24:case"end":return n.stop()}},n,this,[[0,19]])}))}},{key:"_verify",value:function(t){var e;return Sr(this,void 0,void 0,Or().mark(function r(){var n,o,i,a,s,c;return Or().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.getSession();case 3:if(o=(n=r.sent).data,!(i=n.error)){r.next=8;break}return r.abrupt("return",{data:null,error:i});case 8:return r.next=10,ur(this.fetch,"POST","".concat(this.url,"/factors/").concat(t.factorId,"/verify"),{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:null===(e=null===o||void 0===o?void 0:o.session)||void 0===e?void 0:e.access_token});case 10:if(s=(a=r.sent).data,!(c=a.error)){r.next=15;break}return r.abrupt("return",{data:null,error:c});case 15:return r.next=17,this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s));case 17:return this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),r.abrupt("return",{data:s,error:c});case 21:if(r.prev=21,r.t0=r.catch(0),!Ve(r.t0)){r.next=25;break}return r.abrupt("return",{data:null,error:r.t0});case 25:throw r.t0;case 26:case"end":return r.stop()}},r,this,[[0,21]])}))}},{key:"_challenge",value:function(t){var e;return Sr(this,void 0,void 0,Or().mark(function r(){var n,o,i;return Or().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.getSession();case 3:if(o=(n=r.sent).data,!(i=n.error)){r.next=8;break}return r.abrupt("return",{data:null,error:i});case 8:return r.next=10,ur(this.fetch,"POST","".concat(this.url,"/factors/").concat(t.factorId,"/challenge"),{headers:this.headers,jwt:null===(e=null===o||void 0===o?void 0:o.session)||void 0===e?void 0:e.access_token});case 10:return r.abrupt("return",r.sent);case 13:if(r.prev=13,r.t0=r.catch(0),!Ve(r.t0)){r.next=17;break}return r.abrupt("return",{data:null,error:r.t0});case 17:throw r.t0;case 18:case"end":return r.stop()}},r,this,[[0,13]])}))}},{key:"_challengeAndVerify",value:function(t){return Sr(this,void 0,void 0,Or().mark(function e(){var r,n,o;return Or().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._challenge({factorId:t.factorId});case 2:if(n=(r=e.sent).data,!(o=r.error)){e.next=7;break}return e.abrupt("return",{data:null,error:o});case 7:return e.next=9,this._verify({factorId:t.factorId,challengeId:n.id,code:t.code});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}))}},{key:"_listFactors",value:function(){return Sr(this,void 0,void 0,Or().mark(function t(){var e,r,n,o,i;return Or().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUser();case 2:if(r=(e=t.sent).data.user,!(n=e.error)){t.next=7;break}return t.abrupt("return",{data:null,error:n});case 7:return i=(o=(null===r||void 0===r?void 0:r.factors)||[]).filter(function(t){return"totp"===t.factor_type&&"verified"===t.status}),t.abrupt("return",{data:{all:o,totp:i},error:null});case 10:case"end":return t.stop()}},t,this)}))}},{key:"_getAuthenticatorAssuranceLevel",value:function(){var t,e;return Sr(this,void 0,void 0,Or().mark(function r(){var n,o,i,a,s,c;return Or().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getSession();case 2:if(o=(n=r.sent).data.session,!(i=n.error)){r.next=7;break}return r.abrupt("return",{data:null,error:i});case 7:if(o){r.next=9;break}return r.abrupt("return",{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 9:return a=this._decodeJWT(o.access_token),s=null,a.aal&&(s=a.aal),c=s,(null!==(e=null===(t=o.user.factors)||void 0===t?void 0:t.filter(function(t){return"verified"===t.status}))&&void 0!==e?e:[]).length>0&&(c="aal2"),r.abrupt("return",{data:{currentLevel:s,nextLevel:c,currentAuthenticationMethods:a.amr||[]},error:null});case 17:case"end":return r.stop()}},r,this)}))}}])&&jr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pr(t){"@babel/helpers - typeof";return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){return(Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ir=function(){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ar(t,e)}(o,Tr);var t,e,r,n=(e=o,r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=Rr(e);if(r){var o=Rr(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pr(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t){return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),n.call(this,t)}return Object.defineProperty(t=o,"prototype",{writable:!1}),t}();function Nr(t){"@babel/helpers - typeof";return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(){Cr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new k(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==e&&r.call(v,o)&&(d=v);var b=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==Nr(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(l).then(function(t){f.value=t,a(f)},function(t){return n("throw",t,a,s)})}s(c.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=p,s(b,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(b),s(b,a,"Generator"),s(b,o,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Br={headers:{"X-Client-Info":"supabase-js/2.4.0"}},Fr={schema:"public"},Dr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},Gr={},Mr=function(){function t(e,r,n){var o,i,a,s,c,u,f,l;if(function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.supabaseUrl=e,this.supabaseKey=r,!e)throw Error("supabaseUrl is required.");if(!r)throw Error("supabaseKey is required.");var h=e.replace(/\/$/,"");if(this.realtimeUrl="".concat(h,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(h,"/auth/v1"),this.storageUrl="".concat(h,"/storage/v1"),h.match(/(supabase\.co)|(supabase\.in)/)){var p=h.split(".");this.functionsUrl="".concat(p[0],".functions.").concat(p[1],".").concat(p[2])}else this.functionsUrl="".concat(h,"/functions/v1");var d="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),y={db:Fr,realtime:Gr,auth:Object.assign(Object.assign({},Dr),{storageKey:d}),global:Br},v=function(t){var e=t.db,r=t.auth,n=t.realtime,o=t.global,i=y.auth,a=y.realtime,s=y.global;return{db:Object.assign(Object.assign({},y.db),e),auth:Object.assign(Object.assign({},i),r),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},s),o)}}(null!==n&&void 0!==n?n:{});this.storageKey=null!==(i=null===(o=v.auth)||void 0===o?void 0:o.storageKey)&&void 0!==i?i:"",this.headers=null!==(s=null===(a=v.global)||void 0===a?void 0:a.headers)&&void 0!==s?s:{},this.auth=this._initSupabaseAuthClient(null!==(c=v.auth)&&void 0!==c?c:{},this.headers,null===(u=v.global)||void 0===u?void 0:u.fetch),this.fetch=Ne(r,this._getAccessToken.bind(this),null===(f=v.global)||void 0===f?void 0:f.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new tt("".concat(h,"/rest/v1"),{headers:this.headers,schema:null===(l=v.db)||void 0===l?void 0:l.schema,fetch:this.fetch}),this._listenForAuthEvents()}var e,r;return e=t,(r=[{key:"functions",get:function(){return new O(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}},{key:"storage",get:function(){return new Pe(this.storageUrl,this.headers,this.fetch)}},{key:"from",value:function(t){return this.rest.from(t)}},{key:"rpc",value:function(t){return this.rest.rpc(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}},{key:"channel",value:function(t){return this.realtime.channel(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}})}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(t){return this.realtime.removeChannel(t)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:function(){var t,e,r,n,o,i;return r=this,n=void 0,o=void 0,i=Cr().mark(function r(){return Cr().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.auth.getSession();case 2:return r.abrupt("return",null!==(e=null===(t=r.sent.data.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:null);case 5:case"end":return r.stop()}},r,this)}),new(o||(o=Promise))(function(t,e){function a(t){try{c(i.next(t))}catch(t){e(t)}}function s(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o(function(t){t(r)})).then(a,s)}c((i=i.apply(r,n||[])).next())})}},{key:"_initSupabaseAuthClient",value:function(t,e,r){var n=t.autoRefreshToken,o=t.persistSession,i=t.detectSessionInUrl,a=t.storage,s=t.storageKey;return new Ir({url:this.authUrl,headers:Object.assign(Object.assign({},{Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)}),e),storageKey:s,autoRefreshToken:n,persistSession:o,detectSessionInUrl:i,storage:a,fetch:r})}},{key:"_initRealtimeClient",value:function(t){return new Bt(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},null===t||void 0===t?void 0:t.params)}))}},{key:"_listenForAuthEvents",value:function(){var t=this;return this.auth.onAuthStateChange(function(e,r){t._handleTokenChanged(e,null===r||void 0===r?void 0:r.access_token,"CLIENT")})}},{key:"_handleTokenChanged",value:function(t,e,r){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===e?"SIGNED_OUT"!==t&&"USER_DELETED"!==t||(this.realtime.setAuth(this.supabaseKey),"STORAGE"==r&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!==e&&void 0!==e?e:null),this.changedAccessToken=e)}}])&&Ur(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Yr=function(t,e,r){return new Mr(t,e,r)}},,,function(t,e,r){"use strict";"undefined"===typeof Promise&&(r(10).enable(),window.Promise=r(12)),r(13),Object.assign=r(14)},function(t,e,r){"use strict";var n=r(2),o=[ReferenceError,TypeError,RangeError],i=!1;function a(){i=!1,n._Y=null,n._Z=null}function s(t,e){return e.some(function(e){return t instanceof e})}e.disable=a,e.enable=function(t){t=t||{},i&&a(),i=!0;var e=0,r=0,c={};n._Y=function(e){var r;2===e._V&&c[e._1]&&(c[e._1].logged?c[r=e._1].logged&&(t.onHandled?t.onHandled(c[r].displayId,c[r].error):c[r].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[r].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[r].displayId+"."))):clearTimeout(c[e._1].timeout),delete c[e._1])},n._Z=function(n,i){0===n._U&&(n._1=e++,c[n._1]={displayId:null,error:i,timeout:setTimeout(function(e){(t.allRejections||s(c[e].error,t.whitelist||o))&&(c[e].displayId=r++,t.onUnhandled?(c[e].logged=!0,t.onUnhandled(c[e].displayId,c[e].error)):(c[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}(c[e].displayId,c[e].error)))}.bind(null,n._1),s(i,o)?100:2e3),logged:!1})}}},function(t,e,r){"use strict";!function(e){function r(t){o.length||n(),o[o.length]=t}t.exports=r;var n,o=[],i=0,a=1024;function s(){for(;i<o.length;){var t=i;if(i+=1,o[t].call(),i>a){for(var e=0,r=o.length-i;e<r;e++)o[e]=o[e+i];o.length-=i,i=0}}o.length=0,i=0}var c,u,f,l="undefined"!==typeof e?e:self,h=l.MutationObserver||l.WebKitMutationObserver;function p(t){return function(){var e=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(e),clearInterval(r),t()}}}"function"===typeof h?(c=1,u=new h(s),f=document.createTextNode(""),u.observe(f,{characterData:!0}),n=function(){f.data=c=-c}):n=p(s),r.requestFlush=n,r.makeRequestCallFromTimer=p}(r(3))},function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(2);t.exports=o;var i=l(!0),a=l(!1),s=l(null),c=l(void 0),u=l(0),f=l("");function l(t){var e=new o(o._0);return e._V=1,e._W=t,e}o.resolve=function(t){if(t instanceof o)return t;if(null===t)return s;if(void 0===t)return c;if(!0===t)return i;if(!1===t)return a;if(0===t)return u;if(""===t)return f;if("object"===n(t)||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,r){r(t)})}return l(t)};var h=function(t){return"function"===typeof Array.from?(h=Array.from,Array.from(t)):(h=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};o.all=function(t){var e=h(t);return new o(function(t,r){if(0===e.length)return t([]);var i=e.length;function a(s,c){if(c&&("object"===n(c)||"function"===typeof c)){if(c instanceof o&&c.then===o.prototype.then){for(;3===c._V;)c=c._W;return 1===c._V?a(s,c._W):(2===c._V&&r(c._W),void c.then(function(t){a(s,t)},r))}var u=c.then;if("function"===typeof u)return void new o(u.bind(c)).then(function(t){a(s,t)},r)}e[s]=c,0===--i&&t(e)}for(var s=0;s<e.length;s++)a(s,e[s])})},o.reject=function(t){return new o(function(e,r){r(t)})},o.race=function(t){return new o(function(e,r){h(t).forEach(function(t){o.resolve(t).then(e,r)})})},o.prototype.catch=function(t){return this.then(null,t)}},function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.r(e),r.d(e,"Headers",function(){return l}),r.d(e,"Request",function(){return m}),r.d(e,"Response",function(){return w}),r.d(e,"DOMException",function(){return _}),r.d(e,"fetch",function(){return k});var o="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof o&&o,i={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};if(i.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!==typeof t&&(t+=""),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!==typeof t&&(t+=""),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i.iterable&&(e[Symbol.iterator]=function(){return e}),e}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function d(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:i.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=""+t:i.arrayBuffer&&i.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(d)}),this.text=function(){var t,e,r,n=h(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=p(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=c(t),e=u(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},l.prototype.delete=function(t){delete this.map[c(t)]},l.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},l.prototype.set=function(t,e){this.map[c(t)]=u(e)},l.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),f(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),f(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),f(t)},i.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=t+"";if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},v.call(m.prototype),v.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];w.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})};var _=o.DOMException;try{new _}catch(t){(_=function(t,e){this.message=t,this.name=e,this.stack=Error(t).stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function k(t,e){return new Promise(function(r,a){var s=new m(t,e);if(s.signal&&s.signal.aborted)return a(new _("Aborted","AbortError"));var c=new XMLHttpRequest;function f(){c.abort()}c.onload=function(){var t,e,n={status:c.status,statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var o="response"in c?c.response:c.responseText;setTimeout(function(){r(new w(o,n))},0)},c.onerror=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},c.onabort=function(){setTimeout(function(){a(new _("Aborted","AbortError"))},0)},c.open(s.method,function(t){try{return""===t&&o.location.href?o.location.href:t}catch(e){return t}}(s.url),!0),"include"===s.credentials?c.withCredentials=!0:"omit"===s.credentials&&(c.withCredentials=!1),"responseType"in c&&(i.blob?c.responseType="blob":i.arrayBuffer&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!e||"object"!==n(e.headers)||e.headers instanceof l?s.headers.forEach(function(t,e){c.setRequestHeader(e,t)}):Object.getOwnPropertyNames(e.headers).forEach(function(t){c.setRequestHeader(t,u(e.headers[t]))}),s.signal&&(s.signal.addEventListener("abort",f),c.onreadystatechange=function(){4===c.readyState&&s.signal.removeEventListener("abort",f)}),c.send("undefined"===typeof s._bodyInit?null:s._bodyInit)})}k.polyfill=!0,o.fetch||(o.fetch=k,o.Headers=l,o.Request=m,o.Response=w)},function(t){"use strict";var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t){for(var o,i,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),s=1;s<arguments.length;s++){for(var c in o=Object(arguments[s]))r.call(o,c)&&(a[c]=o[c]);if(e){i=e(o);for(var u=0;u<i.length;u++)n.call(o,i[u])&&(a[i[u]]=o[i[u]])}}return a}},,function(t,e,r){"use strict";!function(t){var n=r(17),o=r(18),i=r(19);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,r);if("number"===typeof t){if("string"===typeof e)throw Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e),t}(t,e,r,n):"string"===typeof e?function(t,e,r){if("string"===typeof r&&""!==r||(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),o=(t=s(t,n)).write(e,r);return o!==n&&(t=t.slice(0,o)),t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(n=e.length)!==n?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(n)return D(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,o){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),isNaN(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r<t.length){if(r<0){if(!o)return-1;r=0}}else{if(o)return-1;r=t.length-1}if("string"===typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,o);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,o){var i,a=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var f=-1;for(i=r;i<s;i++)if(u(t,i)===u(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===c)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var l=!0,h=0;h<c;h++)if(u(t,i+h)!==u(e,h)){l=!1;break}if(l)return i}return-1}function m(t,e,r,n){var o=t.length-(r=+r||0);n?(n=+n)>o&&(n=o):n=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function g(t,e,r,n){return M(D(e,t.length-r),t,r,n)}function w(t,e,r,n){return M(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function _(t,e,r,n){return M(G(e),t,r,n)}function k(t,e,r,n){return M(function(t,e){for(var r,n,o=[],i=0;i<t.length&&(e-=2)>=0;++i)n=(r=t.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,e,r){return n.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,s,c,u=t[o],f=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=r)switch(l){case 1:u<128&&(f=u);break;case 2:128===(192&(i=t[o+1]))&&(c=(31&u)<<6|63&i)>127&&(f=c);break;case 3:a=t[o+2],128===(192&(i=t[o+1]))&&128===(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:a=t[o+2],s=t[o+3],128===(192&(i=t[o+1]))&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(f=c)}null===f?(f=65533,l=1):f>65535&&(n.push((f-=65536)>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=l}return function(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=j));return r}(n)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return u(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return f(e),e>0&&void 0!==r?"string"===typeof n?s(null,e).fill(r,n):s(null,e).fill(r):s(null,e)}(0,t,e,r)},c.allocUnsafe=function(t){return l(null,t)},c.allocUnsafeSlow=function(t){return l(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,o>>>=0,this===t)return 0;for(var i=o-n,a=r-e,s=Math.min(i,a),u=this.slice(n,o),f=t.slice(e,r),l=0;l<s;++l)if(u[l]!==f[l]){i=u[l],a=f[l];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return g(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function S(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function L(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function T(t,e,r){var n,o=t.length;e&&e>=0||(e=0),(!r||r<0||r>o)&&(r=o);for(var i="",a=e;a<r;++a)i+=(n=t[a])<16?"0"+n.toString(16):n.toString(16);return i}function P(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function A(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function N(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function C(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||C(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,i){return i||C(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},c.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n<(o*=128)||(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i<(o*=128)||(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||R(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||R(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);R(this,t,e,r,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);R(this,t,e,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e<t.length||(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},c.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=c.isBuffer(t)?t:D(""+new c(t,n)),s=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function D(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(r>=1114112)throw Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function G(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function M(t,e,r,n){for(var o=0;o<n&&o+r<e.length&&o<t.length;++o)e[o+r]=t[o];return o}}(r(3))},function(t,e){"use strict";e.byteLength=function(t){var e=s(t),r=e[1];return 3*(e[0]+r)/4-r},e.toByteArray=function(t){var e,r,i=s(t),a=i[0],c=i[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,c)),f=0,l=c>0?a-4:a;for(r=0;r<l;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;return 2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[f++]=255&e),1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(c(t,a,a+16383>s?s:a+16383));return 1===o?i.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===o&&i.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),i.join("")};for(var r=[],n=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var o,i=[],a=e;a<n;a+=3)i.push(r[(o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return i.join("")}n[45]=62,n[95]=63},function(t,e){e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,f=-7,l=r?o-1:0,h=r?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+t[e+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=u}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,c,u=8*i-o-1,f=(1<<u)-1,l=f>>1,h=23===o?5.960464477539062e-8:0,p=n?0:i-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=f):(e*(c=Math.pow(2,-(a=Math.floor(Math.log(e)/Math.LN2))))<1&&(a--,c*=2),(e+=a+l<1?h*Math.pow(2,1-l):h/c)*c<2||(a++,c/=2),a+l<f?a+l<1?(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0):(s=(e*c-1)*Math.pow(2,o),a+=l):(s=0,a=f));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[r+p]=255&a,p+=d,a/=256,u-=8);t[r+p-d]|=128*y}},function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t){function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(){if("object"===("undefined"===typeof self?"undefined":e(self))&&self)return self;if("object"===("undefined"===typeof window?"undefined":e(window))&&window)return window;throw Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"===("undefined"===typeof globalThis?"undefined":e(globalThis))&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(t,e,r){t.exports=r(22).version},function(t){t.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["I\xf1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.34","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=4.0.0"},"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"test":"tape test/unit/*.js","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0"}')}]]);
//# sourceMappingURL=vendors~main.16486640.chunk.js.map